#Unlisted on_actions by haveabeard
#http://forum.paradoxplaza.com/forum/index.php?threads/list-of-currently-hardcoded-features-mechanics-etc-in-hoi4.957265/page-25#post-22275603
#on_military_access
#on_offer_military_access
#on_improve_relation
#on_guarantee
#on_non_aggression_pact
#on_call_allies
#on_join_allies
#on_declare_war
#on_create_faction
#on_join_faction
#on_offer_join_faction
#on_peace_proposal
#on_add_wargoal
#on_lend_lease
#on_incoming_lend_lease
#on_send_volunteers
#on_send_expeditionary_force
#on_return_expeditionary_forces
#on_request_expeditionary_forces
#on_generate_wargoal
#on_boost_party_popularity
#on_stage_coup
#on_leave_faction
#on_dismantle_faction
#on_ask_for_state_control
#on_give_state_control
#on_reduce_autonomy
#on_increase_autonomy

on_actions = {

	#Timed pulses, four year and thri yearly pulses copied from EUIV, weekly and monthly from the top of my head, doesn't given an error at least?
	on_monthly = {
		effect = {
			# Generic
			ai_update_build_units = yes

			if = {
				limit = {
					is_in_array = { global.ct_states = THIS }
					no_jihadist_government = yes
					OR = {
						check_variable = { global.month = 2 }
						check_variable = { global.month = 4 }
						check_variable = { global.month = 6 }
						check_variable = { global.month = 8 }
						check_variable = { global.month = 10 }
						check_variable = { global.month = 12 }
					}
				}
				# Possibility of domestic terror attack - civilian
				if = {
					limit = {
						is_in_array = { global.ct_states = THIS }
						no_jihadist_government = yes
						OR = {
							has_country_flag = threat_level_low
							has_country_flag = threat_level_moderate
							has_country_flag = threat_level_substantial
							has_country_flag = threat_level_severe
							has_country_flag = threat_level_critical
						}
					}
					random_list = {
						1 = { #terror attack planned
							random_list = {
								50 = { #foiled
									country_event = { id = terror.3 days = 15 random_hours = 45 }
								}
								50 = { #not foiled
									random_list = {
										33 = {
											set_country_flag = government_targeted
											country_event = { id = terror.4 days = 30 random_hours = 2400 }
										}
										33 = {
											set_country_flag = shia_targeted
											country_event = { id = terror.4 days = 30 random_hours = 2400 }
										}
										33 = {
											set_country_flag = church_targeted
											country_event = { id = terror.4 days = 30 random_hours = 2400 }
										}
									}
									modifier = {
										factor = 1.1
										has_idea = police_04
									}
									modifier = {
										factor = 1.2
										has_idea = police_03
									}
									modifier = {
										factor = 1.3
										has_idea = police_02
									}
									modifier = {
										factor = 1.4
										has_idea = police_01
									}
								}
							}
							modifier = {
								factor = 2
								has_country_flag = threat_level_moderate
							}
							modifier = {
								factor = 3
								has_country_flag = threat_level_substantial
							}
							modifier = {
								factor = 6
								has_country_flag = threat_level_severe
							}
							modifier = {
								factor = 10
								has_country_flag = threat_level_critical
							}
						}
						99 = {
						}
					}
				}
				# Possibility of domestic terror attack - military
				if = {
					limit = {
						is_in_array = { global.ct_states = THIS }
						no_jihadist_government = yes
						OR = {
							has_country_flag = threat_level_severe
							has_country_flag = threat_level_critical
						}
					}
					random_list = {
						1 = { #terror attack planned
							random_list = {
								50 = { #foiled
									country_event = { id = terror.3 days = 30 random_hours = 2400 }
								}
								50 = { #not foiled
									country_event = { id = terror.5 days = 60 random_hours = 2400 }
									modifier = {
										factor = 1.1
										has_idea = police_04
									}
									modifier = {
										factor = 1.2
										has_idea = police_03
									}
									modifier = {
										factor = 1.3
										has_idea = police_02
									}
									modifier = {
										factor = 1.4
										has_idea = police_01
									}
								}
							}
							modifier = {
								factor = 2
								has_country_flag = threat_level_severe
							}
							modifier = {
								factor = 4
								has_country_flag = threat_level_critical
							}
						}
						99 = {
						}
					}
				}
				# Possibility of international terror attack - civilian
				if = {
					limit = {
						is_in_array = { global.ct_states = THIS }
						no_jihadist_government = yes
						OR = {
							has_country_flag = threat_level_moderate
							has_country_flag = threat_level_substantial
							has_country_flag = threat_level_severe
							has_country_flag = threat_level_critical
						}
						is_full_state = yes
						any_country = {
							OR = {
								has_government = democratic
								has_government = communism
							}
							OR = {
								is_western_nation = yes
								is_East_Asia = yes
								original_tag = SOV
							}
							is_in_array = { ROOT.influence_array = THIS.id }
						}
					}
					random_list = {
						1 = { #terror attack planned
							random_list = {
								50 = { #foiled
									country_event = { id = terror.3 days = 15 random_hours = 2400 }
								}
								50 = { #not foiled
									news_event = { id = terror.6 days = 30 random_hours = 2400 }
									modifier = {
										factor = 1.1
										has_idea = police_04
									}
									modifier = {
										factor = 1.2
										has_idea = police_03
									}
									modifier = {
										factor = 1.3
										has_idea = police_02
									}
									modifier = {
										factor = 1.4
										has_idea = police_01
									}
								}
							}
							modifier = {
								factor = 1.5
								has_country_flag = threat_level_substantial
							}
							modifier = {
								factor = 2
								has_country_flag = threat_level_severe
							}
							modifier = {
								factor = 2.5
								has_country_flag = threat_level_critical
							}
						}
						99 = {
						}
					}
				}
				# Possibility of international terror attack - military
				if = {
					limit = {
						is_in_array = { global.ct_states = THIS }
						no_jihadist_government = yes
						OR = {
							has_country_flag = threat_level_severe
							has_country_flag = threat_level_critical
						}
						is_full_state = yes
						any_country = {
							OR = {
								has_government = democratic
								has_government = communism
							}
							is_full_state = yes
							has_military_access_to = ROOT
						}
					}
					random_list = {
						1 = { #terror attack planned
							random_list = {
								50 = { #foiled
									country_event = { id = terror.3 days = 30 random_hours = 2400 }
								}
								50 = { #not foiled
									news_event = { id = terror.7 days = 60 random_hours = 2400 }
									modifier = {
										factor = 1.1
										has_idea = police_04
									}
									modifier = {
										factor = 1.2
										has_idea = police_03
									}
									modifier = {
										factor = 1.3
										has_idea = police_02
									}
									modifier = {
										factor = 1.4
										has_idea = police_01
									}
								}
							}
							modifier = {
								factor = 2
								has_country_flag = threat_level_critical
							}
						}
						99 = {
						}
					}
				}
				# Possibility of jihadists crossing the border
				if = {
					limit = {
						OR = {
							has_country_flag = threat_level_severe
							has_country_flag = threat_level_critical
						}
					}
					every_neighbor_country = {
						limit = {
							no_jihadist_government = yes
							is_in_array = { global.ct_states = THIS }
						}
						random_owned_state = {
							limit = {
								any_neighbor_state = {
									is_owned_by = ROOT
								}
								NOT = { state = 175 }
							}
							set_temp_variable = { temp1 = THIS }
						}
						random_list = {
							1 = {
								country_event = { id = terror.8 days = 45 random_hours = 2400 }
								modifier = {
									factor = 5
									ROOT = { has_country_flag = threat_level_critical }
								}
								modifier = {
									factor = 0.5
									divisions_in_state = {
										size > 0
										state = temp1
									}
								}
								modifier = {
									factor = 0.5
									divisions_in_state = {
										size > 1
										state = temp1
									}
								}
								modifier = {
									factor = 0.5
									divisions_in_state = {
										size > 2
										state = temp1
									}
								}
								modifier = {
									factor = 0.5
									divisions_in_state = {
										size > 3
										state = temp1
									}
								}
								modifier = {
									factor = 0.5
									divisions_in_state = {
										size > 4
										state = temp1
									}
								}
							}
							99 = {
							}
						}
					}
				}
			}

			# AGRI SHIT
			AGRI_plow_the_fields = yes
			# LITERACY STUFF
			EDU_annual_pulse_for_learning_stuff = yes

			# GCC
			if = { limit = { threat > 25 }
				add_to_variable = { global.gcc_unity = 1 }
			}
			if = { limit = { threat > 50 }
				add_to_variable = { global.gcc_unity = 2 }
			}
			if = { limit = { threat > 75 }
				add_to_variable = { global.gcc_unity = 5 }
			}
			clamp_variable = { var = global.gcc_unity min = 0 max = 100 }

			#Chinese Aggression
			if = {
				limit = { check_variable = { chinese_aggression > 0 } }
				subtract_from_variable = { chinese_aggression = 1 }
			}
			#CT Training Decay
			if = {
				limit = {
					check_variable = { ct_training > 0 }
					is_in_array = { global.ct_states = THIS }
				}
				subtract_from_variable = { ct_training = 0.2 }
				clamp_variable = {
					var = ct_training
					min = 0
					max = 10
				}
			}

			# Radicalization increase
			# tri-monthly Radicalization Increase
			if = {
				limit = {
					check_variable = { party_pop_array^11 > 0 }
					is_in_array = { global.ct_states = THIS }
					OR = {
						check_variable = { global.month = 3 }
						check_variable = { global.month = 6 }
						check_variable = { global.month = 9 }
						check_variable = { global.month = 12 }
					}
				}
				set_temp_variable = { rad_change = party_pop_array^11 }
				multiply_temp_variable = { rad_change = 0.5 }
				modify_radicalization_effect = yes
			}
			if = { limit = { has_variable = social_conservatism_government }
				if = { limit = { check_variable = { social_conservatism_government < social_conservatism_society } }
					subtract_from_variable = { social_conservatism_society = 1 }
					clamp_variable = {
						var = social_conservatism_society
						min = social_conservatism_government
						max = 100
					}

					if = {
						limit = {
							OR = {
								check_variable = { global.month = 4 }
								check_variable = { global.month = 8 }
								check_variable = { global.month = 12 }
							}
						}
						random_list = {
							50 = {
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 10 }
									check_variable = { social_conservatism_society > 10 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 20 }
									check_variable = { social_conservatism_society > 20 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 30 }
									check_variable = { social_conservatism_society > 30 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 40 }
									check_variable = { social_conservatism_society > 40 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 50 }
									check_variable = { social_conservatism_society > 50 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 60 }
									check_variable = { social_conservatism_society > 60 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 70 }
									check_variable = { social_conservatism_society > 70 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 80 }
									check_variable = { social_conservatism_society > 80 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government < 90 }
									check_variable = { social_conservatism_society > 90 }
								}
								country_event = { id =  radicalization.1 random_hours = 24 }
							}
							50 = {

							}
						}
					}
				}

				if = { limit = { check_variable = { social_conservatism_government > social_conservatism_society } }
					add_to_variable = { social_conservatism_society = 1 }
					clamp_variable = {
						var = social_conservatism_society
						min = 0
						max = social_conservatism_government
					}

					if = {
						limit = {
							OR = {
								check_variable = { global.month = 4 }
								check_variable = { global.month = 8 }
								check_variable = { global.month = 12 }
							}
						}
						random_list = {
							50 = {
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 10 }
									check_variable = { social_conservatism_society < 10 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 20 }
									check_variable = { social_conservatism_society < 20 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 30 }
									check_variable = { social_conservatism_society < 30 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 40 }
									check_variable = { social_conservatism_society < 40 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 50 }
									check_variable = { social_conservatism_society < 50 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 60 }
									check_variable = { social_conservatism_society < 60 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 70 }
									check_variable = { social_conservatism_society < 70 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 80 }
									check_variable = { social_conservatism_society < 80 }
								}
								modifier = {
									factor = 0.5
									check_variable = { social_conservatism_government > 90 }
									check_variable = { social_conservatism_society < 90 }
								}
								country_event = { id =  radicalization.2 random_hours = 24 }
							}
							50 = {

							}
						}
					}
				}
			}

			if = {
				limit = {
					is_in_array = { global.ct_states = THIS }
					OR = {
						check_variable = { global.month = 4 }
						check_variable = { global.month = 8 }
						check_variable = { global.month = 12 }
					}
				}
				country_event = { id = radicalization.9 random_days = 10 }
				country_event = { id = radicalization.7 random_days = 10 }
			}

			# Neighbor Updates
			update_neighbors_effects = yes # Updates Neighbor Effects

			# Auto-Influence Call
			if = {
				limit = {
					is_ai = no
					any_of = {
						array = auto_influence_array
						NOT = { check_variable = { v = 0 } }
					}
				}
				set_variable = { current_political_power_cost = 0 }
				set_variable = { nations_influenced = 0 }

				set_temp_variable = { percent_change = global.percent_change_value }
				set_temp_variable = { tag_index = THIS.id }
				for_each_loop = {
					array = auto_influence_array
					if = {
						limit = {
							NOT = { check_variable = { v = 0 } }
							check_variable = { current_political_power_cost < political_power }
							var:v = {
								ROOT = { NOT = { has_country_flag = spread_influence@PREV } }
								exists = yes
							}
						}
						set_temp_variable = { influence_target = v }
						change_influence_percentage = yes
						add_to_variable = { nations_influenced = 1 }
						add_to_variable = { current_political_power_cost = -50 }
						var:v = {
							ROOT = {
								if = { limit = { has_global_flag = GAME_RULE_spread_influence_14_days }
									set_country_flag = { flag = spread_influence@PREV value = 1 days = 14 }
								}
								else_if = { limit = { has_global_flag = GAME_RULE_spread_influence_60_days }
									set_country_flag = { flag = spread_influence@PREV value = 1 days = 60 }
								}
								else_if = { limit = { has_global_flag = GAME_RULE_spread_influence_30_days }
									set_country_flag = { flag = spread_influence@PREV value = 1 days = 30 }
								}
							}
						}
					}

					#
					if = { limit = { var:v = { exists = no } }
						var:v = {
							ROOT = {
								remove_auto_influencer_request = yes
								update_auto_influence_array = yes
								update_dirty_influence_var = yes
							}
						}
					}
				}

				country_event = influence.54
			}

			country_event = egypt.100
		}
	}

	on_thri_yearly_pulse = { }

	on_four_year_pulse = { }

	on_five_year_pulse = { }

	on_peace_proposal = { }

	on_new_term_election = {
		random_events = {
			100 = MD4_election_campaign.0

			#County specials
			1000 = election_SOV.1
			1000 = brazil.39
			1000 = spain.500
			1000 = taiwan.3
			1000 = arme.2008
			1000 = arme.2017
		}
	}

	# Ace pilots
	# country, FROM = ace
	on_ace_promoted = {
		random_events = {
			100 = MD_ace_promoted.1
		}
	}

	# country, FROM = ace, PREV = enemy ace
	# This event fires twice, once for each ace.
	on_aces_killed_each_other = {
		random_events = {
			100 = MD_aces_killed_each_other.1
		}
	}

	# country, FROM = our ace,
	# PREV = enemy ace, has killed FROM
	on_ace_killed_by_ace = {
		random_events = {
			100 = MD_ace_killed_by_ace.1
		}
	}

	# country, FROM = our ace,
	# PREV = enemy ace, killed by FROM
	on_ace_killed_other_ace = {
		random_events = {
			100 = MD_ace_killed_other_ace.1
		}
	}

	# country, FROM = ace
	on_ace_killed = {
		random_events = {
			100 = MD_ace_died.1
		}
	}

	# During justifying wargoals
	# triggered daily, so make sure there is a sink somewhere not firing events
	# country, FROM = target nation
	on_justifying_wargoal_pulse = {
		effect = {
			FROM = {
				if = { limit = { is_ai = yes }
					ai_update_build_units = yes
				}
			}

		}
	}

	on_wargoal_expire = { }

	#FROM is state #ROOT is broken as hell
	on_nuke_drop = {
		effect = {
		}
	}

	on_border_war_lost = {
		effect = {

		}
	}

	on_leave_faction = {
		effect = {

		}
	}

	#FROM is the one that joins the faction
	on_create_faction = {

	}

	#FROM is country getting invited.
	on_offer_join_faction = {
		effect = {

		}
	}

	#FROM is faction leader on join faction requests.
	on_join_faction = {
		effect = {
			if = {
				limit = { FROM = { tag = CHI } }
				add_to_variable = { chinese_aggression = 1 }
			}
		}
	}

	# ROOT is capitulated country, FROM is winner
	on_capitulation = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = ETH_victory_ERI
					}
						ROOT = { original_tag = ERI }
						FROM = { original_tag = ETH }
					}
					ERI = {
						kill_country_leader = yes
					}
					every_owned_state = {
						limit = {
							is_core_of = ERI
							is_controlled_by = ETH
						}
						ETH = {
							set_state_owner = PREV
						}
					}
					set_global_flag = ETH_victory_ERI
				}
				else = {
					news_event = { id = country_capitulated.0 days = 1 }
				}

			if = {
				limit = {
					ROOT = { original_tag = NKR }
					FROM = { original_tag = ARM }
				}

				AZE = { white_peace = ARM }
			}
			else_if = {
				limit = {
					ROOT = { original_tag = NKR }
					FROM = { original_tag = AZE }
				}

				AZE = {
					white_peace = ARM
					remove_ideas = {
						AZE_karabakh_revanchism
						AZE_karabakh_defeat
					}
				}
			}

			#Fuck your shitty dynamic tag system pdx
			FROM = {
				if = {
					limit = {
						has_country_flag = dynamic_flag
						has_civil_war = yes
						NOT = {
							TAG = original_tag
							has_country_flag = is_civil_war_faction
						}
					}
					clr_country_flag = dynamic_flag
					clr_country_flag = dynamic_rebel_flag
					set_country_flag = fix_your_broken_dynamic_tags
					if = {
						limit = {
							OR = {
								is_in_array = { ruling_party = 0 }
								is_in_array = { ruling_party = 7 }
								is_in_array = { ruling_party = 13 }
								is_in_array = { ruling_party = 22 }
							}
						}
						meta_effect = {
							text = { set_cosmetic_tag = [ROOTTAG]_AUTH }
							ROOTTAG = "[?original_tag.GetTag]"
						}
					}
					else_if = {
						limit = {
							OR = {
								is_in_array = { ruling_party = 0 }
								is_in_array = { ruling_party = 7 }
								is_in_array = { ruling_party = 13 }
								is_in_array = { ruling_party = 22 }
							}
						}
						meta_effect = {
							text = { set_cosmetic_tag = [ROOTTAG]_AUTH_S }
							ROOTTAG = "[?original_tag.GetTag]"
						}
					}
					else_if = {
						limit = {
							OR = {
								is_in_array = { ruling_party = 4 }
								is_in_array = { ruling_party = 10 }
								is_in_array = { ruling_party = 19 }
								is_in_array = { ruling_party = 23 }
							}
						}
						meta_effect = {
							text = { set_cosmetic_tag = [ROOTTAG]_AUTH_S }
							ROOTTAG = "[?original_tag.GetTag]"
						}
					}
					else_if = {
						limit = {
							OR = {
								is_in_array = { ruling_party = 9 }
								is_in_array = { ruling_party = 11 }
								is_in_array = { ruling_party = 21 }
							}
						}
						meta_effect = {
							text = { set_cosmetic_tag = [ROOTTAG]_AUTH_SS }
							ROOTTAG = "[?original_tag.GetTag]"
						}
					}
					else = {
						set_cosmetic_tag = original_tag
					}
				}
			}

			#Special capitulation for ISIS
			if = {
				limit = {
					original_tag = ISI
					has_start_date > 2016.1.1
				}
				# Give Iraqi states first Kurdistan if they've capture them, otherwise return to Iraq
				every_owned_state = {
					limit = {
						is_core_of = IRQ
						is_controlled_by = KUR
					}
					KUR = {
						set_state_owner = PREV
					}
				}
				every_owned_state = {
					limit = {
						is_core_of = IRQ
					}
					IRQ = {
						set_state_owner = PREV
					}
				}
				# In Syria, give every non-capital state to its current controller
				every_owned_state = {
					limit = {
						is_core_of = SYR
					}
					controller = {
						transfer_state = PREV
					}
				}
				# Rest to the winner
				FROM = { annex_country = { target = ISI } }
			}
		}
	}

	# FROM is war target
	# ROOT is the declaring nation
	on_declare_war = {
		effect = {
			if = {
				limit = {
					#both in civil war
					ROOT = { original_tag = FROM }
				}
				#assumes ROOT = civil war tag
				ROOT = {
					#Politics
					if = {
						limit = {
							NOT = { has_variable = ruling_party^0 }
						}
						start_politics_input = yes

						#copy politics
						for_loop_effect = {
							end = party_pop_array^num
							value = v
							set_variable = { party_pop_array^v = FROM.party_pop_array^v }
						}

						#realign with new outlook percentages
						add_up_party_totals = yes
						set_party_positions = yes

						#check FROM for flag to NOT set leader
						if = {
							limit = {
								FROM = { NOT = { has_country_flag = no_leader_change } }
							}
							set_failsafe_change_leader = yes
							startup_politics = yes
						}
					}
					#VARIABLES
					set_variable = { var = corporate_tax_rate value = FROM.corporate_tax_rate }
					set_variable = { var = population_tax_rate value = FROM.population_tax_rate }
					set_variable = { treasury = FROM.treasury }

					#don't get values of original yet - REMINDER -> add it on_civil_war_end
					set_variable = { debt = 0 }
					set_variable = { int_investments = 0 }

					#influence
					set_variable = { domestic_influence_amount = FROM.domestic_influence_amount }
					if = {
						limit = {check_variable = { domestic_influence_amount = 0 } }
						add_to_variable = { domestic_influence_amount = 100 }
					}
					#just copy all
					for_loop_effect = {
						end = FROM.influence_array^num
						value = v

						add_to_array = { influence_array = FROM.influence_array^v }
						add_to_array = { influence_array_val = FROM.influence_array_val^v }
					}
					recalculate_influence = yes

					#GAME VARIABLES
					add_political_power = FROM.political_power
					add_political_power = 400 #bonus

					#LAWS
					set_variable = { gdp_per_capita = FROM.gdp_per_capita }
					update_budget_laws_for_FROM_nation = yes

					set_variable = { economic_cycles = FROM.economic_cycles }
					if = { limit = { check_variable = { economic_cycles = 6 } }
						add_ideas = depression
					}
					else_if = { limit = { check_variable = { economic_cycles = 5 } }
						add_ideas = recession
					}
					else_if = { limit = { check_variable = { economic_cycles = 4 } }
						add_ideas = stagnation
					}
					else_if = { limit = { check_variable = { economic_cycles = 3 } }
						add_ideas = stable_growth
					}
					else_if = { limit = { check_variable = { economic_cycles = 2 } }
						add_ideas = fast_growth
					}
					else_if = { limit = { check_variable = { economic_cycles = 1 } }
						add_ideas = economic_boom
					}

					if = { limit = { FROM = { has_idea = paralyzing_corruption } }
						add_ideas = paralyzing_corruption
					}
					else_if = { limit = { FROM = { has_idea = crippling_corruption } }
						add_ideas = crippling_corruption
					}
					else_if = { limit = { FROM = { has_idea = rampant_corruption } }
						add_ideas = rampant_corruption
					}
					else_if = { limit = { FROM = { has_idea = unrestrained_corruption } }
						add_ideas = unrestrained_corruption
					}
					else_if = { limit = { FROM = { has_idea = systematic_corruption } }
						add_ideas = systematic_corruption
					}
					else_if = { limit = { FROM = { has_idea = widespread_corruption } }
						add_ideas = widespread_corruption
					}
					else_if = { limit = { FROM = { has_idea = medium_corruption } }
						add_ideas = medium_corruption
					}
					else_if = { limit = { FROM = { has_idea = modest_corruption } }
						add_ideas = modest_corruption
					}
					else_if = { limit = { FROM = { has_idea = slight_corruption } }
						add_ideas = slight_corruption
					}
					else_if = { limit = { FROM = { has_idea = negligible_corruption } }
						add_ideas = negligible_corruption
					}

					if = { limit = { FROM = { has_idea = consumption_economy } }
						add_ideas = consumption_economy
					}
					else_if = { limit = { FROM = { has_idea = mixed_economy } }
						add_ideas = mixed_economy
					}
					else_if = { limit = { FROM = { has_idea = export_economy } }
						add_ideas = export_economy
					}

					if = { limit = { FROM = { has_idea = no_military } }
						add_ideas = no_military
					}
					else_if = { limit = { FROM = { has_idea = volunteer_army } }
						add_ideas = volunteer_army
					}
					else_if = { limit = { FROM = { has_idea = partial_draft_army } }
						add_ideas = partial_draft_army
					}
					else_if = { limit = { FROM = { has_idea = draft_army } }
						add_ideas = draft_army
					}

					if = { limit = { FROM = { has_idea = no_women_in_military } }
						add_ideas = no_women_in_military
					}
					else_if = { limit = { FROM = { has_idea = volunteer_women } }
						add_ideas = volunteer_women
					}
					else_if = { limit = { FROM = { has_idea = drafted_women } }
						add_ideas = drafted_women
					}

					if = { limit = { FROM = { has_idea = intervention_isolation } }
						add_ideas = intervention_isolation
					}
					else_if = { limit = { FROM = { has_idea = intervention_local_security } }
						add_ideas = intervention_local_security
					}
					else_if = { limit = { FROM = { has_idea = intervention_limited_interventionism } }
						add_ideas = intervention_limited_interventionism
					}
					else_if = { limit = { FROM = { has_idea = intervention_regional_interventionism } }
						add_ideas = intervention_regional_interventionism
					}
					else_if = { limit = { FROM = { has_idea = intervention_global_interventionism } }
						add_ideas = intervention_global_interventionism
					}
					else_if = { limit = { FROM = { has_idea = intervention_neo_imperialism } }
						add_ideas = intervention_neo_imperialism
					}

					if = { limit = { FROM = { has_idea = officer_baptism_by_fire } }
						add_ideas = officer_baptism_by_fire
					}
					else_if = { limit = { FROM = { has_idea = officer_basic_training } }
						add_ideas = officer_basic_training
					}
					else_if = { limit = { FROM = { has_idea = officer_advanced_training } }
						add_ideas = officer_advanced_training
					}
					else_if = { limit = { FROM = { has_idea = officer_military_school } }
						add_ideas = officer_military_school
					}
					else_if = { limit = { FROM = { has_idea = officer_military_academy } }
						add_ideas = officer_military_academy
					}
					else_if = { limit = { FROM = { has_idea = officer_international_education } }
						add_ideas = officer_international_education
					}

					### Internal factions
					if = { limit = { FROM = { has_idea = small_medium_business_owners } }
						add_ideas = small_medium_business_owners
					}
					if = { limit = { FROM = { has_idea = international_bankers } }
						add_ideas = international_bankers
					}
					if = { limit = { FROM = { has_idea = fossil_fuel_industry } }
						add_ideas = fossil_fuel_industry
					}
					if = { limit = { FROM = { has_idea = industrial_conglomerates } }
						add_ideas = industrial_conglomerates
					}
					if = { limit = { FROM = { has_idea = oligarchs } }
						add_ideas = oligarchs
					}
					if = { limit = { FROM = { has_idea = maritime_industry } }
						add_ideas = maritime_industry
					}
					if = { limit = { FROM = { has_idea = defense_industry } }
						add_ideas = defense_industry
					}
					if = { limit = { FROM = { has_idea = the_military } }
						add_ideas = the_military
					}
					if = { limit = { FROM = { has_idea = intelligence_community } }
						add_ideas = intelligence_community
					}
					if = { limit = { FROM = { has_idea = labour_unions } }
						add_ideas = labour_unions
					}
					if = { limit = { FROM = { has_idea = landowners } }
						add_ideas = landowners
					}
					if = { limit = { FROM = { has_idea = farmers } }
						add_ideas = farmers
					}
					if = {
						limit = {
							FROM = {
								has_idea = communist_cadres
								ROOT = {
									OR = {
										is_in_array = { ruling_party = 4 }
										is_in_array = { ruling_party = 19 }
									}
								}
							}
						}
						add_ideas = communist_cadres
					}
					if = { limit = { FROM = { has_idea = the_priesthood } }
						add_ideas = the_priesthood
					}
					if = { limit = { FROM = { has_idea = the_ulema } }
						add_ideas = the_ulema
					}
					if = { limit = { FROM = { has_idea = the_clergy } }
						add_ideas = the_clergy
					}
					if = { limit = { FROM = { has_idea = wahabi_ulema } }
						add_ideas = wahabi_ulema
					}
					if = { limit = { FROM = { has_idea = the_donju } }
						add_ideas = the_donju
					}
					if = { limit = { FROM = { has_idea = the_bazaar } }
						add_ideas = the_bazaar
					}
					if = {
						limit = {
							FROM = {
								has_idea = saudi_royal_family
								ROOT = {
									OR = {
										is_in_array = { ruling_party = 10 }
										is_in_array = { ruling_party = 23 }
										is_in_array = { ruling_party = 0 }
									}
								}
							}
						}
						add_ideas = saudi_royal_family
					}
					if = {
						limit = {
							FROM = {
								has_idea = irgc
								ROOT = {
									NOT = {
										has_government = democratic
										has_government = fascism
									}
								}
							}
						}
						add_ideas = irgc
					}
					if = {
						limit = {
							FROM = {
								has_idea = iranian_quds_force
								ROOT = {
									NOT = {
										has_government = democratic
										has_government = fascism
									}
								}
							}
						}
						add_ideas = iranian_quds_force
					}
					if = {
						limit = {
							FROM = {
								has_idea = vevak
								ROOT = {
									NOT = {
										has_government = democratic
										has_government = fascism
									}
								}
							}
						}
						add_ideas = vevak
					}
					if = {
						limit = {
							FROM = {
								has_idea = foreign_jihadis
								ROOT = {
									OR = {
										is_in_array = { ruling_party = 11 }
									}
								}
							}
						}
						add_ideas = foreign_jihadis
					}
					if = { limit = { FROM = { has_idea = isi_pakistan } }
						add_ideas = isi_pakistan
					}
					if = { limit = { FROM = { has_idea = wall_street } }
						add_ideas = wall_street
					}
					if = { limit = { FROM = { has_idea = chaebols } }
						add_ideas = chaebols
					}

					#copy leader throughput
					set_variable = { Western_Autocracy_leader = FROM.Western_Autocracy_leader?0 }
					set_variable = { conservatism_leader = FROM.conservatism_leader?0 }
					set_variable = { liberalism_leader = FROM.liberalism_leader?0 }
					set_variable = { socialism_leader = FROM.socialism_leader?0 }

					set_variable = { Communist-State_leader = FROM.Communist-State_leader?0 }
					set_variable = { anarchist_communism_leader = FROM.anarchist_communism_leader?0 }
					set_variable = { Conservative_leader = FROM.Conservative_leader?0 }
					set_variable = { Autocracy_leader = FROM.Autocracy_leader?0 }
					set_variable = { Mod_Vilayat_e_Faqih_leader = FROM.Mod_Vilayat_e_Faqih_leader?0 }
					set_variable = { Vilayat_e_Faqih_leader = FROM.Vilayat_e_Faqih_leader?0 }

					set_variable = { Kingdom_leader = FROM.Kingdom_leader?0 }
					set_variable = { Caliphate_leader = FROM.Caliphate_leader?0 }

					set_variable = { Neutral_Muslim_Brotherhood_leader = FROM.Neutral_Muslim_Brotherhood_leader?0 }
					set_variable = { Neutral_Autocracy_leader = FROM.Neutral_Autocracy_leader?0 }
					set_variable = { Neutral_conservatism_leader = FROM.Neutral_conservatism_leader?0 }
					set_variable = { oligarchism_leader = FROM.oligarchism_leader?0 }
					set_variable = { Neutral_Libertarian_leader = FROM.Neutral_Libertarian_leader?0 }
					set_variable = { Neutral_green_leader = FROM.Neutral_green_leader?0 }
					set_variable = { neutral_Social_leader = FROM.neutral_Social_leader?0 }
					set_variable = { Neutral_Communism_leader = FROM.Neutral_Communism_leader?0 }
					set_variable = { Nat_Populism_leader = FROM.Nat_Populism_leader?0 }
					set_variable = { Nat_Fascism_leader = FROM.Nat_Fascism_leader?0 }
					set_variable = { Nat_Autocracy_leader = FROM.Nat_Autocracy_leader?0 }
					set_variable = { Monarchist_leader = FROM.Monarchist_leader?0 }

					calculate_influence_percentage = yes #set alignment drifts from influence
					ingame_update_setup = yes 	#money system
					setup_init_factions = yes 	#flags for int. factions
					update_neighbors_effects = yes # Updates Neighbor Effects
					economic_cycle_drift_popularity = yes #drift from neighbor

					country_event = { id = brotherhood.0 } #Sets muslim_brotherhood relations
					country_event = { id = brotherhood.2 }

					#Recognition
					if = {
						limit = {
							NOT = {
								has_government = fascism
								FROM = { has_government = fascism }
							}
						}
						add_ideas = { rival_government }
						add_to_array = { global.rival_governments = THIS }
						set_country_flag = rival_government_@FROM
						FROM = {
							add_to_array = { global.rival_governments = THIS }
							set_country_flag = rival_government_@ROOT
							if = {
								limit = { has_start_date < 2016.01.01 }
								add_to_variable = {
									var = Granted_Recognition
									value = 188
								}
							}
							else_if = {
								limit = { has_start_date > 2016.01.01 }
								add_to_variable = {
									var = Granted_Recognition
									value = 193
								}
							}
						}
					}
					#Jihadist uprising
					if = {
						limit = {
							has_government = fascism
							NOT = { FROM = { has_cosmetic_tag = SAU_AQ } }
						}
						add_named_threat = {
							threat = 5
							name = terror.threat
						}
						add_ideas = Non_State_Actor
						if = {
							limit = { has_idea = saudi_royal_family }
							swap_ideas = {
								remove_idea = saudi_royal_family
								add_idea = foreign_jihadis
							}
						}
						if = {
							limit = { has_idea = the_military }
							swap_ideas = {
								remove_idea = the_military
								add_idea = foreign_jihadis
							}
						}
						every_other_country = {
							limit = { has_military_access_to = ROOT }
							diplomatic_relation = {
								country = ROOT
								relation = military_access
								active = no
							}
						}
						every_other_country = {
							limit = { has_guaranteed = ROOT }
							diplomatic_relation = {
								country = ROOT
								relation = guarantee
								active = no
							}
						}
						if = {
							limit = { is_in_faction = yes }
							leave_faction = yes
						}
						set_political_party = {
							ideology = fascism
							popularity = 100
						}
						set_variable = { party_pop_array^11 = 1 }
						recalculate_party = yes
						clear_array = ruling_party
						clear_array = gov_coalition_array
						add_to_array = { ruling_party = 11 }
						update_government_coalition_strength = yes
						update_party_name = yes
						set_coalition_drift = yes
						set_ruling_leader = yes
						set_leader = yes
						#Influence system
						init_influence = yes
						set_variable = { domestic_influence_amount = 200 }
						startup_influence = yes
						FROM = { set_country_flag = fighting_jihadis }
						if = {
							limit = { country_exists = AQY }
							remove_opinion_modifier = {
								target = AQY
								modifier = AlQaida_Are_Terrorists
							}
							remove_opinion_modifier = {
								target = AQY
								modifier = AlQaida_Are_Terrorists_Trade
							}
						}
						if = {
							limit = { country_exists = TAL }
							remove_opinion_modifier = {
								target = TAL
								modifier = AlQaida_Are_Terrorists
							}
							remove_opinion_modifier = {
								target = TAL
								modifier = AlQaida_Are_Terrorists_Trade
							}
						}
						if = {
							limit = { country_exists = TTP }
							remove_opinion_modifier = {
								target = TTP
								modifier = AlQaida_Are_Terrorists
							}
							remove_opinion_modifier = {
								target = TTP
								modifier = AlQaida_Are_Terrorists_Trade
							}
						}
						every_country = {
							limit = { no_jihadist_government = yes }
							add_opinion_modifier = {
								target = ROOT
								modifier = terrorism_is_no_no
							}
							add_opinion_modifier = {
								target = ROOT
								modifier = terrorism_is_no_no_trade
							}
							# add_ai_strategy = { type = befriend id = ROOT value = -200 }
							# add_ai_strategy = { type = support id = ROOT value = -200 }
							# add_ai_strategy = { type = protect id = ROOT value = -200 }
							# add_ai_strategy = { type = send_volunteers_desire id = ROOT value = -200 }
							# add_ai_strategy = { type = contain id = ROOT value = 200 }
							# add_ai_strategy = { type = antagonize id = ROOT value = 200 }
							# # add_ai_strategy = { type = conquer id = ROOT value = 200 }
						}
						add_ideas = intervention_neo_imperialism
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 2000
							producer = SOV
						}
						set_variable = { radicalization = 100 }
						set_variable = { social_conservatism_government = 100 }
						set_variable = { social_conservatism_society = 100 }
						if = {
							limit = { original_tag = SUD }
							if = {
								limit = { SUD = { has_war_with = SSU } }
								declare_war_on = {
									target = SSU
									type = annex_everything
								}
							}
							if = {
								limit = { SUD = { has_war_with = SRF } }
								declare_war_on = {
									target = SRF
									type = annex_everything
								}
							}
							if = {
								limit = { SUD = { has_war_with = DAR } }
								declare_war_on = {
									target = DAR
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = SYR }
							if = {
								limit = { country_exists = FSA }
								declare_war_on = {
									target = FSA
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = ROJ }
								declare_war_on = {
									target = ROJ
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = FSA }
							if = {
								limit = { country_exists = SYR }
								declare_war_on = {
									target = SYR
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = ROJ }
								declare_war_on = {
									target = ROJ
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = IRQ }
							if = {
								limit = { country_exists = KUR }
								declare_war_on = {
									target = KUR
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = GNA }
							if = {
								limit = { country_exists = GNC }
								declare_war_on = {
									target = GNC
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = HOR }
								declare_war_on = {
									target = HOR
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = TUA }
								declare_war_on = {
									target = TUA
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = GNC }
							if = {
								limit = { country_exists = GNA }
								declare_war_on = {
									target = GNA
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = HOR }
								declare_war_on = {
									target = HOR
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = TUA }
								declare_war_on = {
									target = TUA
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = HOR }
							if = {
								limit = { country_exists = GNC }
								declare_war_on = {
									target = GNC
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = GNA }
								declare_war_on = {
									target = GNA
									type = annex_everything
								}
							}
							if = {
								limit = { country_exists = TUA }
								declare_war_on = {
									target = TUA
									type = annex_everything
								}
							}
						}
						if = {
							limit = { original_tag = YEM }
							if = {
								limit = { country_exists = HOU }
								declare_war_on = {
									target = HOU
									type = annex_everything
								}
							}
						}
						if = {
							limit = {
								original_tag = AFG
							}
							TAL = {
								annex_country = {
									target = ROOT
									transfer_troops = yes
								}
								declare_war_on = {
									target = FROM
									type = annex_everything
								}
								every_state = {
									limit = { is_core_of = FROM }
									add_core_of = TAL
								}
								every_country = {
									limit = { no_jihadist_government = yes }
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no
									}
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no_trade
									}
									# add_ai_strategy = { type = befriend id = ROOT value = -200 }
									# add_ai_strategy = { type = support id = ROOT value = -200 }
									# add_ai_strategy = { type = protect id = ROOT value = -200 }
									# add_ai_strategy = { type = send_volunteers_desire id = ROOT value = -200 }
									# add_ai_strategy = { type = contain id = ROOT value = 200 }
									# add_ai_strategy = { type = antagonize id = ROOT value = 200 }
									# # add_ai_strategy = { type = conquer id = ROOT value = 200 }
								}
								add_ideas = intervention_neo_imperialism
							}
						}
						if = {
							limit = {
								original_tag = SOM
							}
							SHB = {
								annex_country = {
									target = ROOT
									transfer_troops = yes
								}
								declare_war_on = {
									target = FROM
									type = annex_everything
								}
								if = {
									limit = { country_exists = SNA }
									declare_war_on = {
										target = SNA
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = JUB }
									declare_war_on = {
										target = JUB
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = SWS }
									declare_war_on = {
										target = SWS
										type = annex_everything
									}
								}
								every_state = {
									limit = { is_core_of = FROM }
									add_core_of = SHB
								}
								every_country = {
									limit = { no_jihadist_government = yes }
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no
									}
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no_trade
									}
									# add_ai_strategy = { type = befriend id = ROOT value = -200 }
									# add_ai_strategy = { type = support id = ROOT value = -200 }
									# add_ai_strategy = { type = protect id = ROOT value = -200 }
									# add_ai_strategy = { type = send_volunteers_desire id = ROOT value = -200 }
									# add_ai_strategy = { type = contain id = ROOT value = 200 }
									# add_ai_strategy = { type = antagonize id = ROOT value = 200 }
									# # add_ai_strategy = { type = conquer id = ROOT value = 200 }
								}
								add_ideas = intervention_neo_imperialism
							}
						}
						if = {
							limit = {
								OR = {
									country_exists = ISI
									has_start_date > 2016.01.01
								}
								OR = {
									original_tag = IRQ
									original_tag = SYR
									original_tag = LEB
									original_tag = TUR
									original_tag = JOR
									original_tag = FSA
									original_tag = KUR
									original_tag = ROJ
									original_tag = GNA
									original_tag = GNC
									original_tag = HOR
									original_tag = EGY
									original_tag = TUN
								}
							}
							ISI = {
								annex_country = {
									target = ROOT
									transfer_troops = yes
								}
								declare_war_on = {
									target = FROM
									type = annex_everything
								}
								every_state = {
									limit = { is_core_of = FROM }
									add_core_of = ISI
								}
								if = {
									limit = { PREV = { original_tag = SYR } }
									if = {
										limit = { country_exists = FSA }
										declare_war_on = {
											target = FSA
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = ROJ }
										declare_war_on = {
											target = ROJ
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = FSA } }
									if = {
										limit = { country_exists = SYR }
										declare_war_on = {
											target = SYR
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = ROJ }
										declare_war_on = {
											target = ROJ
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = IRQ } }
									if = {
										limit = { country_exists = KUR }
										declare_war_on = {
											target = KUR
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = GNA } }
									if = {
										limit = { country_exists = GNC }
										declare_war_on = {
											target = GNC
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = HOR }
										declare_war_on = {
											target = HOR
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = GNC } }
									if = {
										limit = { country_exists = GNA }
										declare_war_on = {
											target = GNA
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = HOR }
										declare_war_on = {
											target = HOR
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = HOR } }
									if = {
										limit = { country_exists = GNC }
										declare_war_on = {
											target = GNC
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = GNA }
										declare_war_on = {
											target = GNA
											type = annex_everything
										}
									}
									if = {
										limit = { country_exists = TUA }
										declare_war_on = {
											target = TUA
											type = annex_everything
										}
									}
								}
								if = {
									limit = { PREV = { original_tag = YEM } }
									if = {
										limit = { country_exists = HOU }
										declare_war_on = {
											target = HOU
											type = annex_everything
										}
									}
								}
								every_country = {
									limit = { no_jihadist_government = yes }
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no
									}
									add_opinion_modifier = {
										target = ROOT
										modifier = terrorism_is_no_no_trade
									}
									# add_ai_strategy = { type = befriend id = ROOT value = -200 }
									# add_ai_strategy = { type = support id = ROOT value = -200 }
									# add_ai_strategy = { type = protect id = ROOT value = -200 }
									# add_ai_strategy = { type = send_volunteers_desire id = ROOT value = -200 }
									# add_ai_strategy = { type = contain id = ROOT value = 200 }
									# add_ai_strategy = { type = antagonize id = ROOT value = 200 }
									# # add_ai_strategy = { type = conquer id = ROOT value = 200 }
								}
								add_ideas = intervention_neo_imperialism
							}
						}
						if = {
							limit = { FROM = { has_government = fascism }}
							set_cosmetic_tag = SAU_AQ
						}
					}
					FROM = {
						if = {
							limit = {
								has_government = fascism
								if = {
									limit = { ROOT = { has_government = fascism }}
									has_cosmetic_tag = SAU_AQ
								}
							}
							ROOT = { set_country_flag = fighting_jihadis }
							add_named_threat = {
								threat = 5
								name = terror.threat
							}
							add_ideas = Non_State_Actor
							if = {
								limit = { has_idea = saudi_royal_family }
								swap_ideas = {
									remove_idea = saudi_royal_family
									add_idea = foreign_jihadis
								}
							}
							if = {
								limit = { has_idea = the_military }
								swap_ideas = {
									remove_idea = the_military
									add_idea = foreign_jihadis
								}
							}
							every_other_country = {
								limit = { has_military_access_to = FROM }
								diplomatic_relation = {
									country = FROM
									relation = military_access
									active = no
								}
							}
							every_other_country = {
								limit = { has_guaranteed = ROOT }
								diplomatic_relation = {
									country = ROOT
									relation = guarantee
									active = no
								}
							}
							if = {
								limit = { is_in_faction = yes }
								leave_faction = yes
							}
							set_political_party = {
								ideology = fascism
								popularity = 100
							}
							set_variable = { party_pop_array^11 = 1 }
							recalculate_party = yes
							clear_array = ruling_party
							clear_array = gov_coalition_array
							add_to_array = { ruling_party = 11 }
							update_government_coalition_strength = yes
							update_party_name = yes
							set_coalition_drift = yes
							set_ruling_leader = yes
							set_leader = yes
							#Influence system
							init_influence = yes
							set_variable = { domestic_influence_amount = 200 }
							startup_influence = yes
							if = {
								limit = { country_exists = AQY }
								remove_opinion_modifier = {
									target = AQY
									modifier = AlQaida_Are_Terrorists
								}
								remove_opinion_modifier = {
									target = AQY
									modifier = AlQaida_Are_Terrorists_Trade
								}
							}
							if = {
								limit = { country_exists = TAL }
								remove_opinion_modifier = {
									target = TAL
									modifier = AlQaida_Are_Terrorists
								}
								remove_opinion_modifier = {
									target = TAL
									modifier = AlQaida_Are_Terrorists_Trade
								}
							}
							if = {
								limit = { country_exists = TTP }
								remove_opinion_modifier = {
									target = TTP
									modifier = AlQaida_Are_Terrorists
								}
								remove_opinion_modifier = {
									target = TTP
									modifier = AlQaida_Are_Terrorists_Trade
								}
							}
							every_country = {
								limit = { no_jihadist_government = yes }
								add_opinion_modifier = {
									target = FROM
									modifier = terrorism_is_no_no
								}
								add_opinion_modifier = {
									target = FROM
									modifier = terrorism_is_no_no_trade
								}
								# add_ai_strategy = { type = befriend id = FROM value = -200 }
								# add_ai_strategy = { type = support id = FROM value = -200 }
								# add_ai_strategy = { type = protect id = FROM value = -200 }
								# add_ai_strategy = { type = send_volunteers_desire id = FROM value = -200 }
								# add_ai_strategy = { type = contain id = FROM value = 200 }
								# add_ai_strategy = { type = antagonize id = FROM value = 200 }
								# # add_ai_strategy = { type = conquer id = FROM value = 200 }
							}
							add_ideas = intervention_neo_imperialism
							add_equipment_to_stockpile = {
								type = infantry_weapons
								amount = 2000
								producer = SOV
							}
							set_variable = { radicalization = 100 }
							set_variable = { social_conservatism_government = 100 }
							set_variable = { social_conservatism_society = 100 }
							if = {
								limit = { original_tag = SYR }
								if = {
									limit = { country_exists = FSA }
									declare_war_on = {
										target = FSA
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = ROJ }
									declare_war_on = {
										target = ROJ
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = FSA }
								if = {
									limit = { country_exists = SYR }
									declare_war_on = {
										target = SYR
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = ROJ }
									declare_war_on = {
										target = ROJ
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = IRQ }
								if = {
									limit = { country_exists = KUR }
									declare_war_on = {
										target = KUR
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = GNA }
								if = {
									limit = { country_exists = GNC }
									declare_war_on = {
										target = GNC
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = HOR }
									declare_war_on = {
										target = HOR
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = GNC }
								if = {
									limit = { country_exists = GNA }
									declare_war_on = {
										target = GNA
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = HOR }
									declare_war_on = {
										target = HOR
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = HOR }
								if = {
									limit = { country_exists = GNC }
									declare_war_on = {
										target = GNC
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = GNA }
									declare_war_on = {
										target = GNA
										type = annex_everything
									}
								}
								if = {
									limit = { country_exists = TUA }
									declare_war_on = {
										target = TUA
										type = annex_everything
									}
								}
							}
							if = {
								limit = { original_tag = YEM }
								if = {
									limit = { country_exists = HOU }
									declare_war_on = {
										target = HOU
										type = annex_everything
									}
								}
							}
						}
					}

					# LITERACY RATES
					EDU_learn_to_civil_war = yes
					# AGRICULTURE
					AGRI_civil_war = yes
				}
			}
			hidden_effect = {
				FROM = {
					update_military_rate = yes
					update_neighbors_effects = yes
				}
				ROOT = {
					update_military_rate = yes
					update_neighbors_effects = yes
				}
			}

			# Reduce 15% Influence in This Nation
			set_temp_variable = { percent_change = -15 }
			set_temp_variable = { tag_index = ROOT.id }
			set_temp_variable = { influence_target = FROM.id }
			change_influence_percentage = yes

			FROM = {
				every_neighbor_country = {
					limit = {
						NOT = { tag = ROOT }
						NOT = { is_puppet_of = ROOT }
						NOT = { has_opinion = { target = ROOT value > 50 } }
						NOT = { is_in_faction_with = ROOT }
					}
					set_temp_variable = { percent_change = -5 }
					set_temp_variable = { tag_index = ROOT.id }
					set_temp_variable = { influence_target = THIS.id }
					change_influence_percentage = yes
				}
			}

			#Chinese aggression increase
			if = {
				limit = { ROOT = { tag = CHI } }
				add_to_variable = { chinese_aggression = 10 }
			}
		}
	}

	#Ask for Mil access - FROM is target country
	on_military_access = {
		effect = {
			if = {
				limit = { ROOT = { tag = CHI } }
				add_to_variable = { chinese_aggression = 1 }
			}
		}
	}

	#offer for Mil access to your country - From is target country
	on_offer_military_access = {
		effect = {
		}
	}
	#try on_revoke_guarantee

	# When a new faction is formed
	on_faction_formed = {
		effect = {
		}
	}
	#From is
	on_stage_coup = {
		effect = {
			FROM = {
				update_neighbors_effects = yes
			}
		}
	}

	on_coup_succeeded = {
		effect = {
			ROOT = {
				calculate_influence_percentage = yes #set alignment drifts from influence
				startup_politics = yes
				ingame_update_setup = yes 	#money system
				setup_init_factions = yes 	#flags for int. factions
				set_law_vars = yes 	#vars for change laws secondary effects
				update_neighbors_effects = yes # Updates Neighbor Effects
				economic_cycle_drift_popularity = yes #drift from neighbor
				if = { limit = { is_ai = yes }
					ai_update_build_units = yes
				}

				country_event = { id = brotherhood.0 } #Sets muslim_brotherhood relations
				country_event = { id = brotherhood.2 }
				if = {
					limit = {
						NOT = { has_variable = domestic_influence_amount }
					}
					set_variable = { domestic_influence_amount = 100 }
				}
				recalculate_influence = yes

			}
		}
	}

	#ROOT is winner #FROM gets annexed
	on_civil_war_end_before_annexation = {
		effect = {
			if = {
				limit = {
					FROM = {
						tag = ITA
					}
				}
				FROM = {
					transfer_units_fraction= {
						target = ROOT
						size = 1
						stockpile_ratio = 1
						army_ratio = 1
						navy_ratio = 1
						air_ratio = 1
					}
				}
				ROOT = {
					for_each_loop = {
						array = missile_inventory_array
						value = v
						index = i
						add_to_variable = { missile_inventory_array^i = FROM.missile_inventory_array^i }
					}
					country_event = { id = italy_md.68 days = 2 }
					change_tag_from = FROM
				}
			}
		}
	}

	#ROOT is winner #FROM gets annexed
	on_civil_war_end = {
		effect = {
			if = {
				limit = {
					ROOT = {
						tag = ITA
					}
				}
				ROOT = {
					set_temp_variable = { ITA_stability_factor_change = 0.4 }
					modify_stability_factor_effect = yes
					set_temp_variable = { ITA_stability_weekly_change = 0.002 }
					modify_stability_weekly_effect = yes
				}
			}
			ROOT = {

				if = {
					limit = {
						check_variable = { debt < FROM.debt } #less than
					}
					add_to_variable = { debt = FROM.debt }
				}
				if = {
					limit = {
						check_variable = { int_investments < FROM.int_investments } #less than
					}
					add_to_variable = { int_investments = FROM.int_investments }
				}
				if = {
					limit = {
						is_in_array = { ruling_party = 0 }
					}
					set_politics = {
						ruling_party = democratic
						elections_allowed = no
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 1 }
							is_in_array = { ruling_party = 2 }
							is_in_array = { ruling_party = 3 }
						}
					}
					set_politics = {
						ruling_party = democratic
						elections_allowed = yes
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 4 }
							is_in_array = { ruling_party = 7 }
							is_in_array = { ruling_party = 9 }
						}
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 5 }
							is_in_array = { ruling_party = 6 }
							is_in_array = { ruling_party = 8 }
						}
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = yes
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 10 }
							is_in_array = { ruling_party = 11 }
						}
					}
					set_politics = {
						ruling_party = fascism
						elections_allowed = no
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 13 }
							is_in_array = { ruling_party = 19 }
						}
					}
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 12 }
							is_in_array = { ruling_party = 14 }
							is_in_array = { ruling_party = 15 }
							is_in_array = { ruling_party = 16 }
							is_in_array = { ruling_party = 17 }
							is_in_array = { ruling_party = 18 }
						}
					}
					set_politics = {
						ruling_party = neutrality
						elections_allowed = yes
					}
				}
				else_if = {
					limit = {
						OR = {
							is_in_array = { ruling_party = 21 }
							is_in_array = { ruling_party = 22 }
							is_in_array = { ruling_party = 23 }
						}
					}
					set_politics = {
						ruling_party = nationalist
						elections_allowed = no
					}
				}
				else_if = {
					limit = {
						is_in_array = { ruling_party = 20 }
					}
					set_politics = {
						ruling_party = nationalist
						elections_allowed = yes
					}
				}
				#Recognition
				remove_ideas = rival_government
				remove_from_array = { global.rival_governments = THIS }
				clr_country_flag = rival_government_@FROM
				#CT
				if = {
					limit = { is_in_array = { global.ct_states = THIS }}
					subtract_from_variable = { threat_level = 30 }
					clamp_threat = yes
				}
			}
		}
	}

	on_guarantee = {
	}

	on_improve_relation = {
	}

	on_startup = {
		effect = {
			log = "[GetDateText]: [This.GetName]: on_startup init begun"

			### Constants ###
			## Karabakh ##
			# Tension
			set_variable = { global.CONST_default_karabakh_tension = 20 }
			set_variable = { global.CONST_karabakh_min_tension = 0 }
			set_variable = { global.CONST_karabakh_max_tension = 100 }
			set_variable = { global.CONST_karabakh_tension_level_low = 25 }
			set_variable = { global.CONST_karabakh_tension_level_medium = 50 }
			set_variable = { global.CONST_karabakh_tension_level_high = 75 }
			set_variable = { global.CONST_karabakh_tension_change_low = 10 }
			set_variable = { global.CONST_karabakh_tension_change_medium = 20 }
			set_variable = { global.CONST_karabakh_tension_change_high = 30 }
			set_variable = { global.CONST_karabakh_drift_lowest = 3 }
			set_variable = { global.CONST_karabakh_drift_low = 5 }
			set_variable = { global.CONST_karabakh_drift_medium = 8 }
			set_variable = { global.CONST_karabakh_drift_high = 10 }
			set_variable = { global.CONST_karabakh_drift_modifier_low = 0.75 }
			set_variable = { global.CONST_karabakh_drift_modifier_high = 1.25 }
			# Readiness
			set_variable = { global.CONST_karabakh_default_readiness = 25 }
			set_variable = { global.CONST_karabakh_readiness_min = 0 }
			set_variable = { global.CONST_karabakh_readiness_max = 100 }
			set_variable = { global.CONST_karabakh_readiness_low = 30 }
			set_variable = { global.CONST_karabakh_readiness_medium = 50 }
			set_variable = { global.CONST_karabakh_readiness_high = 80 }
			set_variable = { global.CONST_karabakh_readiness_change_low = 5 }
			set_variable = { global.CONST_karabakh_readiness_change_medium = 10 }
			set_variable = { global.CONST_karabakh_readiness_change_drift = 2 }
			set_variable = { global.CONST_karabakh_readiness_drift_modifier_low = 0.5 }
			set_variable = { global.CONST_karabakh_readiness_drift_modifier_high = 1.5 }
			# Operations
			set_variable = { global.CONST_karabakh_mission_raid = 1 }
			set_variable = { global.CONST_karabakh_mission_arty = 2 }
			set_variable = { global.CONST_karabakh_mission_recon = 3 }
			set_variable = { global.CONST_karabakh_mission_digin = 4 }
			set_variable = { global.CONST_karabakh_mission_question_locals = 5 }
			set_variable = { global.CONST_karabakh_mission_aerial_recon = 6 }
			set_variable = { global.CONST_karabakh_mission_unmanned_recon = 7 }
			# War support
			set_variable = { global.CONST_karabakh_war_support_low = 0.4 }
			set_variable = { global.CONST_karabakh_war_support_medium = 0.6 }
			set_variable = { global.CONST_karabakh_war_support_high = 0.85 }

			set_variable = { global.karabakh_tension = global.CONST_default_karabakh_tension }

			ARM = {
				activate_mission = karabakh_main_countdown_mission
				set_variable = { karabakh_readiness = global.CONST_karabakh_default_readiness }
			}
			AZE = {
				activate_mission = karabakh_main_countdown_mission
				set_variable = { karabakh_readiness = global.CONST_karabakh_default_readiness }
			}

			#Fixing war between a bunch of countries because raisins

			# Global Month
			set_variable = { global.month = 1 }
			set_variable = { global.update_monie_ui = 1 }
			set_variable = { global.update_influence_ui = 1 }

			LIB = { if = { limit = { NOT = { country_exists = LUR } } white_peace = GUI white_peace = SIE } }
			DRC = { if = { limit = { NOT = { country_exists = MLC } } white_peace = UGA white_peace = RWA } }
			LIB = { set_law_attitudes = yes } #any country will do

			ITA = {
				if = {
					limit = {
						is_ai = no
					}
					country_event = italy_md.23
				}
				resize_array = {
  					array = abandon_coalition_threshold
 					size = 24
				}
				calculate_abandon_coalition_threshold = yes
			}

			if = { limit = { has_global_flag = GAME_RULE_gain_0_5_percent_spread }
				set_variable = { global.percent_change_value = 0.5 }
			}
			else_if = { limit = { has_global_flag = GAME_RULE_gain_3_percent_spread }
				set_variable = { global.percent_change_value = 3 }
			}
			else_if = { limit = { has_global_flag = GAME_RULE_gain_4_percent_spread }
				set_variable = { global.percent_change_value = 4 }
			}
			else = {
				set_variable = { global.percent_change_value = 2 }
			}

			every_country = {
				calculate_tax_rate = yes
				calculate_influence_percentage = yes #set alignment drifts from influence
				startup_politics = yes
				ingame_update_setup = yes 	#money system
				setup_init_factions = yes 	#Initializes the Faction System
				set_law_vars = yes 	#vars for change laws secondary effects
				update_neighbors_effects = yes # Updates Neighbor Effects
				economic_cycle_drift_popularity = yes #drift from neighbor

				country_event = { id = brotherhood.0 } #Sets muslim_brotherhood relations
				country_event = { id = brotherhood.2 }
				set_country_flag = { flag = total_AB_wars value = 0 }

				# Sets Global vars for investment then resizes array
				init_investment_system = yes

				init_equipment_purchasing_order_system = yes
				init_auto_influence_array = yes

				# AGRICULTURE INIT
				AGRI_plant_the_seeds = yes
				# LITERACY RATES INIT
				EDU_learn_your_ABCs_with_dread = yes

				# Together for Victory Configuration
				if = { limit = { has_dlc = "Together for Victory" has_idea = NATO_member }
					add_to_tech_sharing_group = NATO_Tech_Share
				}
				# La Resistance Variable Configuration
				if = { limit = { has_dlc = "La Resistance" has_variable = cyber_targets^0 }
					log = "[GetDateText]: [THIS.GetName]: Cleared Cyber Targets Array due to having the LAR DLC"
					clear_array = cyber_targets
				}

				# 2017 State Category Evaluation
				if = { limit = { has_start_date > 2016.1.1 }
					2017_state_init_setup = yes
				}

				# AI Configuration
				if = { limit = { is_ai = yes }
					give_AI_templates = yes
					ai_update_build_units = yes
					if = {
						limit = { gifted_income_list = yes }
						set_variable = { population_tax_rate = 35 }
						set_variable = { corporate_tax_rate = 20 }
						add_ideas = MICROSTATE_fix
					}
				}
			}

			# Organizational Arrays & Continent Arrays
			SAU = {
				#GCC
				#All Potential Nations
				add_to_array = { global.possible_gcc_member_state = SAU }
				add_to_array = { global.possible_gcc_member_state = QAT }
				add_to_array = { global.possible_gcc_member_state = UAE }
				add_to_array = { global.possible_gcc_member_state = BHR }
				add_to_array = { global.possible_gcc_member_state = KUW }
				add_to_array = { global.possible_gcc_member_state = OMA }
				add_to_array = { global.possible_gcc_member_state = MOR }
				add_to_array = { global.possible_gcc_member_state = JOR }
				add_to_array = { global.possible_gcc_member_state = IRQ }
				add_to_array = { global.possible_gcc_member_state = YEM }
				add_to_array = { global.possible_gcc_member_state = EGY }

				#Starting GCC Member States
				add_to_array = { global.gcc_member_state = SAU }
				add_to_array = { global.gcc_member_state = QAT }
				add_to_array = { global.gcc_member_state = UAE }
				add_to_array = { global.gcc_member_state = BHR }
				add_to_array = { global.gcc_member_state = KUW }
				add_to_array = { global.gcc_member_state = OMA }
			}

			# SCO
			add_to_array = { global.possible_sco_member_state = CHI }
			add_to_array = { global.possible_sco_member_state = AFG }
			add_to_array = { global.possible_sco_member_state = ARM }
			add_to_array = { global.possible_sco_member_state = AZE }
			add_to_array = { global.possible_sco_member_state = BHR }
			add_to_array = { global.possible_sco_member_state = BAN }
			add_to_array = { global.possible_sco_member_state = BHU }
			add_to_array = { global.possible_sco_member_state = BRU }
			add_to_array = { global.possible_sco_member_state = GEO }
			add_to_array = { global.possible_sco_member_state = RAJ }
			add_to_array = { global.possible_sco_member_state = IND }
			add_to_array = { global.possible_sco_member_state = PER }
			add_to_array = { global.possible_sco_member_state = IRQ }
			add_to_array = { global.possible_sco_member_state = ISR }
			add_to_array = { global.possible_sco_member_state = JAP }
			add_to_array = { global.possible_sco_member_state = JOR }
			add_to_array = { global.possible_sco_member_state = KAZ }
			add_to_array = { global.possible_sco_member_state = KOR }
			add_to_array = { global.possible_sco_member_state = KUW }
			add_to_array = { global.possible_sco_member_state = KYR }
			add_to_array = { global.possible_sco_member_state = LAO }
			add_to_array = { global.possible_sco_member_state = MAY }
			add_to_array = { global.possible_sco_member_state = MON }
			add_to_array = { global.possible_sco_member_state = BRM }
			add_to_array = { global.possible_sco_member_state = NEP }
			add_to_array = { global.possible_sco_member_state = NKO }
			add_to_array = { global.possible_sco_member_state = PAK }
			add_to_array = { global.possible_sco_member_state = PHI }
			add_to_array = { global.possible_sco_member_state = QAT }
			add_to_array = { global.possible_sco_member_state = SOV }
			add_to_array = { global.possible_sco_member_state = SAU }
			add_to_array = { global.possible_sco_member_state = SIN }
			add_to_array = { global.possible_sco_member_state = SRI }
			add_to_array = { global.possible_sco_member_state = SYR }
			add_to_array = { global.possible_sco_member_state = TAJ }
			add_to_array = { global.possible_sco_member_state = SIA }
			add_to_array = { global.possible_sco_member_state = TUR }
			add_to_array = { global.possible_sco_member_state = TRK }
			add_to_array = { global.possible_sco_member_state = UAE }
			add_to_array = { global.possible_sco_member_state = UZB }
			add_to_array = { global.possible_sco_member_state = VIE }
			add_to_array = { global.possible_sco_member_state = YEM }

			# Nato Member Array Configuration
			if = { limit = { has_start_date < 2000.1.2 }
				add_to_array = { global.nato_members = BEL }
				add_to_array = { global.nato_members = CAN }
				add_to_array = { global.nato_members = CZE }
				add_to_array = { global.nato_members = DEN }
				add_to_array = { global.nato_members = FRA }
				add_to_array = { global.nato_members = GER }
				add_to_array = { global.nato_members = GRE }
				add_to_array = { global.nato_members = HOL }
				add_to_array = { global.nato_members = HUN }
				add_to_array = { global.nato_members = ICE }
				add_to_array = { global.nato_members = ITA }
				add_to_array = { global.nato_members = LUX }
				add_to_array = { global.nato_members = NOR }
				add_to_array = { global.nato_members = POL }
				add_to_array = { global.nato_members = POR }
				add_to_array = { global.nato_members = SPR }
				add_to_array = { global.nato_members = TUR }
				add_to_array = { global.nato_members = ENG }
				add_to_array = { global.nato_members = USA }
			}
			else_if = { # 2017 start date
				limit = { has_start_date < 2017.1.2 }
				add_to_array = { global.nato_members = ALB }
				add_to_array = { global.nato_members = BEL }
				add_to_array = { global.nato_members = BUL }
				add_to_array = { global.nato_members = CAN }
				add_to_array = { global.nato_members = CRO }
				add_to_array = { global.nato_members = CZE }
				add_to_array = { global.nato_members = DEN }
				add_to_array = { global.nato_members = EST }
				add_to_array = { global.nato_members = FRA }
				add_to_array = { global.nato_members = GER }
				add_to_array = { global.nato_members = GRE }
				add_to_array = { global.nato_members = HOL }
				add_to_array = { global.nato_members = HUN }
				add_to_array = { global.nato_members = ICE }
				add_to_array = { global.nato_members = ITA }
				add_to_array = { global.nato_members = LAT }
				add_to_array = { global.nato_members = LIT }
				add_to_array = { global.nato_members = LUX }
				add_to_array = { global.nato_members = NOR }
				add_to_array = { global.nato_members = POL }
				add_to_array = { global.nato_members = POR }
				add_to_array = { global.nato_members = ROM }
				add_to_array = { global.nato_members = SLO }
				add_to_array = { global.nato_members = SLV }
				add_to_array = { global.nato_members = SPR }
				add_to_array = { global.nato_members = TUR }
				add_to_array = { global.nato_members = ENG }
				add_to_array = { global.nato_members = USA }

				AZE = { activate_mission = AZE_aliev_countdown }
			}

			#CSTO
			add_to_array = { global.CSTO_member = ARM }
			add_to_array = { global.CSTO_member = BLR }
			add_to_array = { global.CSTO_member = KAZ }
			add_to_array = { global.CSTO_member = KYR }
			add_to_array = { global.CSTO_member = SOV }
			add_to_array = { global.CSTO_member = TAJ }

			#African Union
			add_to_array = { global.AU_member = AGL }
			add_to_array = { global.AU_member = ALG }
			add_to_array = { global.AU_member = BEN }
			add_to_array = { global.AU_member = BFA }
			add_to_array = { global.AU_member = BOT }
			add_to_array = { global.AU_member = BUR }
			add_to_array = { global.AU_member = CAM }
			add_to_array = { global.AU_member = CAR }
			add_to_array = { global.AU_member = CDI }
			add_to_array = { global.AU_member = CHA }
			add_to_array = { global.AU_member = CNG }
			add_to_array = { global.AU_member = COM }
			add_to_array = { global.AU_member = DJI }
			add_to_array = { global.AU_member = DRC }
			add_to_array = { global.AU_member = EGU }
			add_to_array = { global.AU_member = EGY }
			add_to_array = { global.AU_member = ERI }
			add_to_array = { global.AU_member = ETH }
			add_to_array = { global.AU_member = GAB }
			add_to_array = { global.AU_member = GAH }
			add_to_array = { global.AU_member = GAM }
			add_to_array = { global.AU_member = GUB }
			add_to_array = { global.AU_member = GUI }
			add_to_array = { global.AU_member = KEN }
			add_to_array = { global.AU_member = LBA }
			add_to_array = { global.AU_member = LES }
			add_to_array = { global.AU_member = LIB }
			add_to_array = { global.AU_member = MAD }
			add_to_array = { global.AU_member = MAL }
			add_to_array = { global.AU_member = MAU }
			add_to_array = { global.AU_member = MLW }
			add_to_array = { global.AU_member = MOR }
			add_to_array = { global.AU_member = MOZ }
			add_to_array = { global.AU_member = MRT }
			add_to_array = { global.AU_member = NAM }
			add_to_array = { global.AU_member = NGR }
			add_to_array = { global.AU_member = NIG }
			add_to_array = { global.AU_member = RWA }
			add_to_array = { global.AU_member = SAF }
			add_to_array = { global.AU_member = SAO }
			add_to_array = { global.AU_member = SEN }
			add_to_array = { global.AU_member = SEY }
			add_to_array = { global.AU_member = SHA }
			add_to_array = { global.AU_member = SIE }
			add_to_array = { global.AU_member = SOM }
			add_to_array = { global.AU_member = SSU }
			add_to_array = { global.AU_member = SUD }
			add_to_array = { global.AU_member = SWA }
			add_to_array = { global.AU_member = TNZ }
			add_to_array = { global.AU_member = TOG }
			add_to_array = { global.AU_member = TUN }
			add_to_array = { global.AU_member = UGA }
			add_to_array = { global.AU_member = VER }
			add_to_array = { global.AU_member = ZAM }
			add_to_array = { global.AU_member = ZIM }

			#ECOWAS
			add_to_array = { global.ECOWAS_member = BEN }
			add_to_array = { global.ECOWAS_member = BFA }
			add_to_array = { global.ECOWAS_member = CDI }
			add_to_array = { global.ECOWAS_member = GAH }
			add_to_array = { global.ECOWAS_member = GAM }
			add_to_array = { global.ECOWAS_member = GUB }
			add_to_array = { global.ECOWAS_member = GUI }
			add_to_array = { global.ECOWAS_member = LIB }
			add_to_array = { global.ECOWAS_member = MAL }
			add_to_array = { global.ECOWAS_member = NGR }
			add_to_array = { global.ECOWAS_member = NIG }
			add_to_array = { global.ECOWAS_member = SEN }
			add_to_array = { global.ECOWAS_member = SIE }
			add_to_array = { global.ECOWAS_member = TOG }
			add_to_array = { global.ECOWAS_member = VER }

			# Utility Tag
			random_country = {
				missile_ui_update = yes

				if = {
					limit = { has_start_date < 2001.1.1 }		#2000 relations
					country_event = { id = init_relations.1 }
				}
				else_if = {
					limit = { has_start_date > 2016.1.1 }		#2017 relations
					country_event = { id = init_relations.0 }
				}

				set_power_ranking_ideas_for_every_country = yes
			}

			# Global Arrays for CT States
			## Middle East CT States
			add_to_array = { global.middle_east_ct_states = ALG }
			add_to_array = { global.middle_east_ct_states = BHR }
			add_to_array = { global.middle_east_ct_states = EGY }
			add_to_array = { global.middle_east_ct_states = IRQ }
			add_to_array = { global.middle_east_ct_states = JOR }
			add_to_array = { global.middle_east_ct_states = KUW }
			add_to_array = { global.middle_east_ct_states = LEB }
			add_to_array = { global.middle_east_ct_states = LBA }
			add_to_array = { global.middle_east_ct_states = MOR }
			add_to_array = { global.middle_east_ct_states = OMA }
			add_to_array = { global.middle_east_ct_states = QAT }
			add_to_array = { global.middle_east_ct_states = SAU }
			add_to_array = { global.middle_east_ct_states = SYR }
			add_to_array = { global.middle_east_ct_states = TUN }
			add_to_array = { global.middle_east_ct_states = TUR }
			add_to_array = { global.middle_east_ct_states = UAE }
			add_to_array = { global.middle_east_ct_states = YEM }

			## Africa CT States
			add_to_array = { global.africa_ct_states = BFA }
			add_to_array = { global.africa_ct_states = CHA }
			add_to_array = { global.africa_ct_states = MAL }
			add_to_array = { global.africa_ct_states = MAU }
			add_to_array = { global.africa_ct_states = NIG }
			add_to_array = { global.africa_ct_states = NGR }
			add_to_array = { global.africa_ct_states = SEN }
			add_to_array = { global.africa_ct_states = SUD }
			add_to_array = { global.africa_ct_states = SOM }

			## Asia CT States
			add_to_array = { global.asia_ct_states = AFG }
			add_to_array = { global.asia_ct_states = KYR }
			add_to_array = { global.asia_ct_states = TAJ }
			add_to_array = { global.asia_ct_states = TRK }
			add_to_array = { global.asia_ct_states = PAK }
			add_to_array = { global.asia_ct_states = UZB }

			# PMC stuff
			# NOTES:
			# Blacwater - founded, 1 expansion, 2 upgrades
			# Wagner - not founded
			# Aegis - founded, 1 expansion, 0 upgrades
			# Constellis - founded, 0 expansion, 1 upgrade
			# MD - not founded

			set_variable = { SOV.pmc_index = 1 }

			## costs
			set_variable = { global.mercs_cost^0 = 3 }
			set_variable = { global.mercs_cost^1 = 5 }
			set_variable = { global.mercs_cost^2 = 7 }
			set_variable = { global.mercs_cost^3 = 9 }
			set_variable = { global.mercs_cost^4 = 15 }
			set_variable = { global.mercs_cost^5 = 12 }
			set_variable = { global.mercs_cost^6 = 9 }

			## upgrades
			set_variable = { global.merc_upgrade^0 = 2 }
			set_variable = { global.merc_upgrade^1 = -1 }
			set_variable = { global.merc_upgrade^2 = 0 }
			set_variable = { global.merc_upgrade^3 = 1 }
			set_variable = { global.merc_upgrade^4 = -1 }

			## weekly costs
			set_variable = { global.mercs_weekly_cost^0 = 0.1 }
			set_variable = { global.mercs_weekly_cost^1 = 0.15 }
			set_variable = { global.mercs_weekly_cost^2 = 0.2 }
			set_variable = { global.mercs_weekly_cost^3 = 0.25 }
			set_variable = { global.mercs_weekly_cost^4 = 0.45 }
			set_variable = { global.mercs_weekly_cost^5 = 0.35 }
			set_variable = { global.mercs_weekly_cost^6 = 0.25 }

			## costs - points
			set_variable = { global.merc_deploy_cost^0 = 1 }
			set_variable = { global.merc_deploy_cost^1 = 2 }
			set_variable = { global.merc_deploy_cost^2 = 2 }
			set_variable = { global.merc_deploy_cost^3 = 3 }
			set_variable = { global.merc_deploy_cost^4 = 4 }
			set_variable = { global.merc_deploy_cost^5 = 3 }
			set_variable = { global.merc_deploy_cost^6 = 2 }

			## initial deployment
			set_variable = { global.merc_deployed^0 = 0 }
			set_variable = { global.merc_deployed^1 = 0 }
			set_variable = { global.merc_deployed^2 = 0 }
			set_variable = { global.merc_deployed^3 = 0 }
			set_variable = { global.merc_deployed^4 = 0 }

			## expansion states
			set_variable = { global.merc_capacity^0 = 5 }
			set_variable = { global.merc_capacity^1 = 3 }
			set_variable = { global.merc_capacity^2 = 5 }
			set_variable = { global.merc_capacity^3 = 3 }
			set_variable = { global.merc_capacity^4 = 3 }

			#Arab Spring
			every_country = {
				limit = {
					if = {
						limit = { has_start_date > 2016.01.01 }
						NOT = {
							original_tag = GNA
							original_tag = GNC
							original_tag = HOR
							original_tag = SYR
							original_tag = EGY
							original_tag = TUN
						}
					}
					NOT = { original_tag = HEZ }
					is_arabic_nation = yes
				}
				country_event = { id = arab_spring.16 }
			}
			#check if influencer
			every_country = {
				if = {
					limit = {
						any_of_scopes = {
							array = global.asia_ct_states
							no_jihadist_government = yes
							is_top5_influencer_PREV = yes
						}
					}
					set_country_flag = asia_influencer
				}
				if = {
					limit = {
						any_of_scopes = {
							array = global.middle_east_ct_states
							no_jihadist_government = yes
							is_top5_influencer_PREV = yes
						}
					}
					set_country_flag = middle_east_influencer
				}
				if = {
					limit = {
						any_of_scopes = {
							array = global.africa_ct_states
							no_jihadist_government = yes
							is_top5_influencer_PREV = yes
						}
					}
					set_country_flag = africa_influencer
				}

			}
			log = "[GetDateText]: [This.GetName]: on_startup init completed"
		}
	}

	on_government_change = {
		effect = {
			update_neighbors_effects = yes # Updates Neighbor Effects
			clear_own_ideology_drift = yes
			recalculate_law_desires = yes
			### Boost to ruling parties ###
			if = {
				limit = {
					has_government = fascism
					is_major = no
				}
				add_ideas = ruling_party_salafist
			}
			else_if = {
				limit = {
					has_government = fascism
					is_major = yes
				}
				add_ideas = major_ruling_party_salafist
			}

			if = {
				limit = {
					has_government = democratic
					is_major = no
				}
				add_ideas = ruling_party_western
			}
			else_if = {
				limit = {
					has_government = democratic
					is_major = yes
				}
				add_ideas = major_ruling_party_western
			}

			if = {
				limit = {
					has_government = communism
					is_major = no
				}
				add_ideas = ruling_party_emerging
			}
			else_if = {
				limit = {
					has_government = communism
					is_major = yes
				}
				add_ideas = major_ruling_party_emerging
			}

			if = {
				limit = {
					has_government = neutrality
					is_major = no
				}
				add_ideas = ruling_party_non_alligned
			}
			else_if = {
				limit = {
					has_government = neutrality
					is_major = yes
				}
				add_ideas = major_ruling_party_non_alligned
			}

			if = {
				limit = {
					has_government = nationalist
					is_major = no
				}
				add_ideas = ruling_party_nationalist
			}
			else_if = {
				limit = {
					has_government = nationalist
					is_major = yes
				}
				add_ideas = major_ruling_party_nationalist
			}
			# Clearing Economic Drifts
			economic_cycle_drift_popularity = yes
		}
	}

	#Chinese Aggression
	on_puppet = {
		effect = {
			if = {
				limit = { FROM = { tag = CHI } }
				add_to_variable = { chinese_aggression = 5 }
			}
			if = {
				limit = { has_idea = Lacks_International_Recognition }
				swap_ideas = {
					remove_idea = Lacks_International_Recognition
					add_idea = Non_State_Actor
				}
				remove_from_array = {
					global.Unrecognised_States = THIS
				}
			}
			#CT
			if = {
				limit = {
					is_in_array =  { global.ct_states = ROOT }
					FROM = { NOT = { has_idea = sunni }}
				}
				ROOT = {
					add_to_variable = { threat_level = 30 }
					clamp_threat = yes
				}
			}
		}
	}
	# ON ANNEX
	on_annex = {
		effect = {
			EDU_learn_to_annex_your_neighbours = yes # LITERACY RATE STUFF
		}
	}
}

on_actions = {
	on_startup = {
		effect = {
			every_country = {
				log = "[GetDateText]: [THIS.GetName]: on_startup setup missiles"
				set_country_flag = setup_missiles
				set_variable = { var_KB_ID = -1 }
				set_variable = { missile_launch_selected_TAG = THIS.id }
				set_variable = { orbit_selected_TAG = THIS.id }
				set_variable = { nukes_selected_TAG = THIS.id }
				set_variable = { var_CIC_use_enrichment = 0 }
				set_variable = { var_nuke_energy_prod = 0 }
				set_variable = { var_nuke_nuclear_material_prod = 0 }
				set_variable = { var_nuclear_warhead_prod_factor = 2 }
				set_variable = { var_nuclear_material_stockpile = 0 }
				set_variable = { var_kinetic_bombardment_stats = 2 }
				# 154 missile types and otherwise
				resize_array = { missile_inventory_array = 154 }
				if = {
					limit = {
						has_idea = nuclear_power
					}
					remove_ideas = nuclear_power
					add_dynamic_modifier = { modifier = nuclear_state_modifier }
				}
				add_dynamic_modifier = { modifier = GNSS_system }
				add_dynamic_modifier = { modifier = COMSAT_system }
				add_dynamic_modifier = { modifier = SPYSAT_system }
				set_sat_orbit_startup = yes

				set_variable = { var_nuclear_material_nuclear_deterrence_factor = 0.005 }

				### sat gui testing
				add_to_array = { payload_types_array = 1 }
				add_to_array = { payload_types_array = 1 }
				add_to_array = { payload_types_array = 1 }
				add_to_array = { payload_types_array = 1 }
				add_to_array = { array = spp_inventory_array value = 1 index = 0 }
				add_to_array = { array = spp_inventory_array value = 30 index = 1 }
				add_to_array = { array = spp_inventory_array value = 1 index = 2 }

				#for testing network traffic
				set_COM_sat_receiver_tech_array = yes
			}
		}
	}

	on_release_as_free = {
		effect = {
			log = "[GetDateText]: [THIS.GetName]: on_release_as_free setup missiles"
			if = {
				limit = {
					NOT = { has_country_flag = setup_missiles }
				}
				set_country_flag = setup_missiles
				set_variable = { var_KB_ID = -1 }
				set_variable = { missile_launch_selected_TAG = THIS.id }
				set_variable = { orbit_selected_TAG = THIS.id }
				set_variable = { nukes_selected_TAG = THIS.id }
				set_variable = { var_CIC_use_enrichment = 0 }
				set_variable = { var_nuke_energy_prod = 0 }
				set_variable = { var_nuke_nuclear_material_prod = 0 }
				set_variable = { var_nuclear_warhead_prod_factor = 2 }
				set_variable = { var_nuclear_material_stockpile = 0 }
				resize_array = { missile_inventory_array = 154 }
				add_dynamic_modifier = { modifier = GNSS_system }
				add_dynamic_modifier = { modifier = COMSAT_system }
				add_dynamic_modifier = { modifier = SPYSAT_system }
				set_sat_orbit_startup = yes
				set_variable = { var_nuclear_material_nuclear_deterrence_factor = 0.005 }
				clear_payload_types = yes
				add_to_array = { array = spp_inventory_array value = 1 index = 0 }
				add_to_array = { array = spp_inventory_array value = 30 index = 1 }
				add_to_array = { array = spp_inventory_array value = 1 index = 2 }
				#for testing network traffic
				set_COM_sat_receiver_tech_array = yes
			}
			missile_ui_update = yes
		}
	}

	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = setup_missiles }
				}
				set_country_flag = setup_missiles
				set_variable = { var_KB_ID = -1 }
				set_variable = { missile_launch_selected_TAG = THIS.id }
				set_variable = { orbit_selected_TAG = THIS.id }
				set_variable = { nukes_selected_TAG = THIS.id }
				set_variable = { var_CIC_use_enrichment = 0 }
				set_variable = { var_nuke_energy_prod = 0 }
				set_variable = { var_nuke_nuclear_material_prod = 0 }
				set_variable = { var_nuclear_warhead_prod_factor = 2 }
				set_variable = { var_nuclear_material_stockpile = 0 }
				resize_array = { missile_inventory_array = 154 }
				add_dynamic_modifier = { modifier = GNSS_system }
				add_dynamic_modifier = { modifier = COMSAT_system }
				add_dynamic_modifier = { modifier = SPYSAT_system }
				set_sat_orbit_startup = yes
				set_variable = { var_nuclear_material_nuclear_deterrence_factor = 0.005 }

				clear_payload_types = yes
				add_to_array = { array = spp_inventory_array value = 1 index = 0 }
				add_to_array = { array = spp_inventory_array value = 30 index = 1 }
				add_to_array = { array = spp_inventory_array value = 1 index = 2 }
				#for testing network traffic
				set_COM_sat_receiver_tech_array = yes
			}
			missile_ui_update = yes
		}
	}

	on_weekly = {
		effect = {
			# In the past it was every day
			nuclear_reactor_fuel_consumption = yes

			# Other Nuclear Stuff
			update_sat_systems_stats = yes

			########
			clear_spy_sat_mission_arrays = yes
			update_SPY_mission_num = yes
			missile_ui_update = yes
		}
	}
}

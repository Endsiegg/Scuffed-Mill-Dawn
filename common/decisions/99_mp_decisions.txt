mp_decision_category = {
	mp_annex_south_america = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_south_america fired"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = south_america
					}
					is_ai = yes
				}
				SUR = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			# Chile is not affected for some reason
			if = {
				limit = { CHL = { is_ai = yes } }
				SUR = {
					annex_country = {
						target = CHL
						transfer_troops = no
					}
				}
			}

			SUR = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = SUR
				}
			}
		}
	}

	mp_annex_africa = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_africa fired"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = africa
					}
					is_ai = yes
				}
				CHA = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			CHA = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = CHA
				}
			}
		}
	}

	mp_annex_asia = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_asia fired"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = asia
					}
					is_ai = yes
				}
				NEP = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			if = {
				limit = { TAL = { is_ai = yes } }
				NEP = {
					annex_country = {
						target = TAL
						transfer_troops = no
					}
				}
			}

			NEP = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = NEP
				}
			}
		}
	}

	mp_annex_north_america = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_north_america"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = north_america
					}
					is_ai = yes
				}
				MEX = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			if = {
				limit = { USA = { is_ai = yes } }
				MEX = {
					annex_country = {
						target = USA
						transfer_troops = no
					}
				}
			}

			MEX = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = MEX
				}
			}
		}
	}

	mp_annex_middle_east = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_middle_east fired"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = middle_east
					}
					is_ai = yes
				}
				OMA = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			if = {
				limit = { YEM = { is_ai = yes } }
				OMA = {
					annex_country = {
						target = YEM
						transfer_troops = no
					}
				}
			}
			if = {
				limit = { LBA = { is_ai = yes } }
				OMA = {
					annex_country = {
						target = LBA
						transfer_troops = no
					}
				}
			}

			OMA = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = OMA
				}
			}
		}
	}

	mp_annex_russia_and_caucasus = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_russia_and_caucasus fired"
			NEP = {
				if = {
					limit = {
						SOV = { is_ai = yes }
					}

					annex_country = {
						target = SOV
						transfer_troops = no
					}
				}

				if = {
					limit = {
						CHE = { is_ai = yes }
					}

					annex_country = {
						target = CHE
						transfer_troops = no
					}
				}

				if = {
					limit = {
						ARM = { is_ai = yes }
					}

					annex_country = {
						target = ARM
						transfer_troops = no
					}
				}

				if = {
					limit = {
						GEO = { is_ai = yes }
					}

					annex_country = {
						target = GEO
						transfer_troops = no
					}
				}

				if = {
					limit = {
						AZE = { is_ai = yes }
					}

					annex_country = {
						target = AZE
						transfer_troops = no
					}
				}

				if = {
					limit = {
						NKR = { is_ai = yes }
					}

					annex_country = {
						target = NKR
						transfer_troops = no
					}
				}

				if = {
					limit = {
						SOO = { is_ai = yes }
					}

					annex_country = {
						target = SOO
						transfer_troops = no
					}
				}

				if = {
					limit = {
						ABK = { is_ai = yes }
					}

					annex_country = {
						target = ABK
						transfer_troops = no
					}
				}
			}

			NEP = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = NEP
				}
			}
		}
	}

	mp_nzl_annex_oceania = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_nzl_annex_oceania fired"
			PAP = {
				if = {
					limit = { AST = { is_ai = yes } }
					annex_country = {
						target = AST
						transfer_troops = no
					}
				}
				if = {
					limit = { IND = { is_ai = yes } }
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				if = {
					limit = { TAI = { is_ai = yes } }
					annex_country = {
						target = TAI
						transfer_troops = no
					}
				}
				if = {
					limit = { JAP = { is_ai = yes } }
					annex_country = {
						target = JAP
						transfer_troops = no
					}
				}
				if = {
					limit = { SOL = { is_ai = yes } }
					annex_country = {
						target = SOL
						transfer_troops = no
					}
				}
				if = {
					limit = { NZL = { is_ai = yes } }
					annex_country = {
						target = NZL
						transfer_troops = no
					}
				}
				if = {
					limit = { MIC = { is_ai = yes } }
					annex_country = {
						target = MIC
						transfer_troops = no
					}
				}
				if = {
					limit = { PLY = { is_ai = yes } }
					annex_country = {
						target = PLY
						transfer_troops = no
					}
				}
			}

			PAP = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = PAP
				}
			}
		}
	}

	mp_annex_europe = {
		visible = {
			NOT = { has_global_flag = hide_mp_optimizations_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "mp_annex_europe fired"
			every_country = {
				limit = {
					all_controlled_state = {
						is_on_continent = europe
					}
					is_ai = yes
				}
				SWI = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			SWI = {
				if = {
					limit = { ENG = { is_ai = yes } }
					annex_country = {
						target = ENG
						transfer_troops = no
					}
				}
				if = {
					limit = { DEN = { is_ai = yes } }
					annex_country = {
						target = DEN
						transfer_troops = no
					}
				}
				if = {
					limit = { FRA = { is_ai = yes } }
					annex_country = {
						target = FRA
						transfer_troops = no
					}
				}
				if = {
					limit = { HOL = { is_ai = yes } }
					annex_country = {
						target = HOL
						transfer_troops = no
					}
				}
				if = {
					limit = { SPR = { is_ai = yes } }
					annex_country = {
						target = SPR
						transfer_troops = no
					}
				}
				if = {
					limit = { POR = { is_ai = yes } }
					annex_country = {
						target = POR
						transfer_troops = no
					}
				}
				if = {
					limit = { TUR = { is_ai = yes } }
					annex_country = {
						target = TUR
						transfer_troops = no
					}
				}
			}

			SWI = {
				add_ideas = mp_optimization_idea
				every_controlled_state = {
					add_core_of = SWI
				}
			}
		}
	}

	mp_generate_tension = {
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_generate_tension"
			add_threat = 100
		}
	}

	mp_create_faction_a = {
		visible = {
			NOT = { has_global_flag = team_a_created_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_create_faction_a"
			set_global_flag = team_a_created_flag
			set_country_flag = team_a_member_flag
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			create_faction = TEAM_A
		}
	}

	mp_join_faction_a = {
		visible = { is_in_faction = no }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_join_faction_a"
			set_country_flag = team_a_member_flag
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			random_country = {
				limit = {
					has_country_flag = team_a_member_flag
					is_faction_leader = yes
				}
				add_to_faction = ROOT
			}
		}
	}

	mp_create_faction_b = {
		visible = {
			NOT = { has_global_flag = team_b_created_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_create_faction_b"
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			set_global_flag = team_b_created_flag
			set_country_flag = team_b_member_flag
			create_faction = TEAM_B
		}
	}

	mp_join_faction_b = {
		visible = { is_in_faction = no }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_join_faction_b"
			set_country_flag = team_b_member_flag
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			random_country = {
				limit = {
					has_country_flag = team_b_member_flag
					is_faction_leader = yes
				}
				add_to_faction = ROOT
			}
		}
	}

	mp_create_faction_c = {
		visible = {
			NOT = { has_global_flag = team_c_created_flag }
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			log = "[GetDateText]: [Root.GetName]: Decision mp_create_faction_c"
			set_global_flag = team_c_created_flag
			set_country_flag = team_c_member_flag
			create_faction = TEAM_C
		}
	}

	mp_join_faction_c = {
		visible = { is_in_faction = no }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_join_faction_c"
			set_country_flag = team_c_member_flag
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			random_country = {
				limit = {
					has_country_flag = team_c_member_flag
					is_faction_leader = yes
				}
				add_to_faction = ROOT
			}
		}
	}

	mp_create_faction_d = {
		visible = {
			NOT = { has_global_flag = team_d_created_flag }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_create_faction_d"
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			set_global_flag = team_d_created_flag
			set_country_flag = team_d_member_flag
			create_faction = TEAM_D
		}
	}

	mp_join_faction_d = {
		visible = { is_in_faction = no }
		complete_effect = {
			if = {
				limit = { has_idea = NATO_member }
				NATO_leave = yes
			}
			else_if = {
				limit = { has_idea = CSTO_member }
				CSTO_leave = yes
			}
			log = "[GetDateText]: [Root.GetName]: Decision mp_join_faction_d"
			set_country_flag = team_d_member_flag
			random_country = {
				limit = {
					has_country_flag = team_d_member_flag
					is_faction_leader = yes
				}
				add_to_faction = ROOT
			}
		}
	}

	mp_allow_to_join_factions = {
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mp_allow_to_join_factions"
			set_rule = { can_join_factions = yes }
		}
	}

	mp_hide_decisions = {
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: mp_hide_decisions fired"
			set_global_flag = hide_mp_optimizations_flag
		}
	}
}

mp_factories_decision_category = {
	add_one_offmap = {
		visible = {
			NOT = { has_country_flag = set_up_offsite_buildings }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision add_one_offmap"
			add_offsite_building = { type = industrial_complex level = 1 }
			add_offsite_building = { type = arms_factory level = 1 }
			set_country_flag = set_up_offsite_buildings
		}
	}
	add_two_offmap = {
		visible = {
			NOT = { has_country_flag = set_up_offsite_buildings }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision add_two_offmap"
			add_offsite_building = { type = industrial_complex level = 2 }
			add_offsite_building = { type = arms_factory level = 2 }
			set_country_flag = set_up_offsite_buildings
		}
	}
	add_three_offmap = {
		visible = {
			NOT = { has_country_flag = set_up_offsite_buildings }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision add_three_offmap"
			add_offsite_building = { type = industrial_complex level = 3 }
			add_offsite_building = { type = arms_factory level = 3 }
			set_country_flag = set_up_offsite_buildings
		}
	}
	add_five_offmap = {
		visible = {
			NOT = { has_country_flag = set_up_offsite_buildings }
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision add_five_offmap"
			add_offsite_building = { type = industrial_complex level = 5 }
			add_offsite_building = { type = arms_factory level = 5 }
			set_country_flag = set_up_offsite_buildings
		}
	}
}
# Author(s): AngriestBird, Doolittle, TheBrokenDroid
scripted_gui = {
	MD_missiles_gui = {
		window_name = MD_countrymissilesview
		context_type = player_context
		parent_window_token = topbar

		dirty = global.missile_ui_updated

		visible = {
			has_country_flag = open_MD_countrymissilesview
		}

		effects = {
			close_button_click = {
				clr_country_flag = open_MD_countrymissilesview
				clr_country_flag = open_MD_target_selection_view
				if = {
					limit = {
						has_country_flag = open_MD_missile_stat_view
					}
					clr_country_flag = open_MD_missile_stat_view
					clear_array = building_damage_stat_display_array
				}
				if = {
					limit = {
						has_country_flag = open_MD_missile_production_type_window
					}
					clear_prod_display_arrays = yes
					clr_country_flag = open_MD_missile_production_type_window
				}
				if = {
					limit = {
						has_country_flag = open_MD_space_selection_window
					}
					clear_array = OLV_display_array
					clear_array = sat_payload_display_array
					clear_array = spp_payload_display_array
					clr_country_flag = OLV_model
					clr_country_flag = sat_payload_model
					clr_country_flag = spp_payload_model
					clear_variable = var_open_space_selection_ledger_1
					clear_variable = var_open_space_selection_ledger_2
					clr_country_flag = open_MD_space_selection_window
				}
				if = {
					limit = {
						has_country_flag = open_MD_select_satellite_system_window
					}
					clear_array = GNSS_mil_systems_array
					clear_array = GNSS_civ_systems_array
					clear_array = COM_mil_systems_array
					clear_array = COM_civ_systems_array
					clear_array = SPY_mil_systems_array
					clear_array = SPY_civ_systems_array
					clr_country_flag = open_MD_select_satellite_system_window
				}
				if = { # Potential Delete?
					limit = {
						has_country_flag = open_MD_nuclear_doctrine_window
					}
					clear_array = nuclear_status_display_array
					clear_array = nuclear_doctrine_display_array
					clear_array = nuclear_warhead_prod_display_array
					clr_country_flag = open_MD_nuclear_doctrine_window
				}
				missile_ui_update = yes
			}
			# Missile Production
			missiles_gui_ledger_btn_1_click = {
				set_variable = { var_open_MD_missiles_gui_ledger_1 = 2 }
				clear_variable = var_open_MD_missiles_gui_ledger_2
				clear_variable = var_open_MD_missiles_gui_ledger_3
				clear_variable = var_open_MD_missiles_gui_ledger_4
				clear_variable = var_open_MD_missiles_gui_ledger_5
				clear_variable = var_open_MD_missiles_gui_ledger_6
				missile_ui_update = yes
			}
			# Space Center and Orbit
			missiles_gui_ledger_btn_4_click = {
				set_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
				clear_variable = var_open_MD_missiles_gui_ledger_1
				clear_variable = var_open_MD_missiles_gui_ledger_2
				clear_variable = var_open_MD_missiles_gui_ledger_3
				clear_variable = var_open_MD_missiles_gui_ledger_5
				clear_variable = var_open_MD_missiles_gui_ledger_6
				set_satellites_gui = yes
				missile_ui_update = yes
			}
			# Satellite Systems
			missiles_gui_ledger_btn_5_click = {
				set_variable = { var_open_MD_missiles_gui_ledger_5 = 2 }
				clear_variable = var_open_MD_missiles_gui_ledger_1
				clear_variable = var_open_MD_missiles_gui_ledger_2
				clear_variable = var_open_MD_missiles_gui_ledger_3
				clear_variable = var_open_MD_missiles_gui_ledger_4
				clear_variable = var_open_MD_missiles_gui_ledger_6
				set_satellites_gui = yes
				missile_ui_update = yes
			}
		}

		properties = {
			missiles_gui_ledger_btn_1 = {
				frame = var_open_MD_missiles_gui_ledger_1
			}
			missiles_gui_ledger_btn_4 = {
				frame = var_open_MD_missiles_gui_ledger_4
			}
			missiles_gui_ledger_btn_5 = {
				frame = var_open_MD_missiles_gui_ledger_5
			}
		}
	}

	MD_countrymissilesview_production_gui = {
		window_name = MD_countrymissilesview_production
		context_type = player_context
		parent_window_name = MD_countrymissilesview

		dirty = global.missile_ui_updated

		visible = {
			check_variable = { var_open_MD_missiles_gui_ledger_1 = 2 }
			has_country_flag = open_MD_countrymissilesview
		}
		effects = {
			### OLV
			production_type_10_button_click = {
				ROOT = {
					set_country_flag = open_MD_missile_production_type_window
					set_country_flag = missile_production_type_10
					set_prod_display_arrays = yes
				}
				missile_ui_update = yes
			}
			### production amount button effects ###
			increase_amount_10_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_10_amount = 1 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_10_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_10_amount = 1 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_10_control_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_10_amount = 10 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_10_control_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_10_amount = 10 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_10_shift_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_10_amount = 100 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_10_shift_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_10_amount = 100 }
					calculate_production_vars_10 = yes
				}
				missile_ui_update = yes
			}
			start_button_10_click = {
				ROOT = {
					set_country_flag = missile_construction_10
					activate_mission = missile_construction_10
					subtract_from_variable = { treasury = var_gui_prod_10_price_total }
				}
				missile_ui_update = yes
			}
			delete_button_10_click = {
				ROOT = {
					clr_country_flag = missile_construction_10

					remove_mission = missile_construction_10
				}
				missile_ui_update = yes
			}
			increase_CIC_10_button_click = {
				add_to_variable = { prod_10_multiplier = 1 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			decrease_CIC_10_button_click = {
				subtract_from_variable = { prod_10_multiplier = 1 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			increase_CIC_10_button_control_click = {
				add_to_variable = { prod_10_multiplier = 10 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			decrease_CIC_10_button_control_click = {
				subtract_from_variable = { prod_10_multiplier = 10 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			increase_CIC_10_button_shift_click = {
				add_to_variable = { prod_10_multiplier = 100 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			decrease_CIC_10_button_shift_click = {
				subtract_from_variable = { prod_10_multiplier = 100 }
				calculate_production_vars_10 = yes
				missile_ui_update = yes
			}
			### GNSS
			production_type_11_button_click = {
				ROOT = {
					set_country_flag = open_MD_missile_production_type_window
					set_country_flag = missile_production_type_11
					set_prod_display_arrays = yes
				}
				missile_ui_update = yes
			}
			### production amount button effects ###
			increase_amount_11_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_11_amount = 1 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_11_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_11_amount = 1 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_11_control_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_11_amount = 10 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_11_control_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_11_amount = 10 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_11_shift_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_11_amount = 100 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_11_shift_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_11_amount = 100 }
					calculate_production_vars_11 = yes
				}
				missile_ui_update = yes
			}
			start_button_11_click = {
				ROOT = {
					set_country_flag = missile_construction_11
					activate_mission = missile_construction_11
					subtract_from_variable = { treasury = var_gui_prod_11_price_total }
				}
				missile_ui_update = yes
			}
			delete_button_11_click = {
				ROOT = {
					clr_country_flag = missile_construction_11
					remove_mission = missile_construction_11
				}
				missile_ui_update = yes
			}
			increase_CIC_11_button_click = {
				add_to_variable = { prod_11_multiplier = 1 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			decrease_CIC_11_button_click = {
				subtract_from_variable = { prod_11_multiplier = 1 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			increase_CIC_11_button_control_click = {
				add_to_variable = { prod_11_multiplier = 10 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			decrease_CIC_11_button_control_click = {
				subtract_from_variable = { prod_11_multiplier = 10 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			increase_CIC_11_button_shift_click = {
				add_to_variable = { prod_11_multiplier = 100 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			decrease_CIC_11_button_shift_click = {
				subtract_from_variable = { prod_11_multiplier = 100 }
				calculate_production_vars_11 = yes
				missile_ui_update = yes
			}
			### COMSAT
			production_type_12_button_click = {
				ROOT = {
					set_country_flag = open_MD_missile_production_type_window
					set_country_flag = missile_production_type_12
					set_prod_display_arrays = yes
				}
				missile_ui_update = yes
			}
			### production amount button effects ###
			increase_amount_12_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_12_amount = 1 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_12_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_12_amount = 1 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_12_control_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_12_amount = 10 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_12_control_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_12_amount = 10 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_12_shift_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_12_amount = 100 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_12_shift_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_12_amount = 100 }
					calculate_production_vars_12 = yes
				}
				missile_ui_update = yes
			}
			start_button_12_click = {
				ROOT = {
					set_country_flag = missile_construction_12
					activate_mission = missile_construction_12
					subtract_from_variable = { treasury = var_gui_prod_12_price_total }
				}
				missile_ui_update = yes
			}
			delete_button_12_click = {
				ROOT = {
					clr_country_flag = missile_construction_12

					remove_mission = missile_construction_12
				}
				missile_ui_update = yes
			}
			increase_CIC_12_button_click = {
				add_to_variable = { prod_12_multiplier = 1 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			decrease_CIC_12_button_click = {
				subtract_from_variable = { prod_12_multiplier = 1 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			increase_CIC_12_button_control_click = {
				add_to_variable = { prod_12_multiplier = 10 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			decrease_CIC_12_button_control_click = {
				subtract_from_variable = { prod_12_multiplier = 10 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			increase_CIC_12_button_shift_click = {
				add_to_variable = { prod_12_multiplier = 100 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			decrease_CIC_12_button_shiftclick = {
				subtract_from_variable = { prod_12_multiplier = 100 }
				calculate_production_vars_12 = yes
				missile_ui_update = yes
			}
			### SPYSAT
			production_type_13_button_click = {
				ROOT = {
					set_country_flag = open_MD_missile_production_type_window
					set_country_flag = missile_production_type_13
					set_prod_display_arrays = yes
				}
				missile_ui_update = yes
			}
			### production amount button effects ###
			increase_amount_13_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_13_amount = 1 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_13_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_13_amount = 1 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_13_control_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_13_amount = 10 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_13_control_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_13_amount = 10 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_13_shift_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_13_amount = 100 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_13_shift_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_13_amount = 100 }
					calculate_production_vars_13 = yes
				}
				missile_ui_update = yes
			}
			start_button_13_click = {
				ROOT = {
					set_country_flag = missile_construction_13
					activate_mission = missile_construction_13
					subtract_from_variable = { treasury = var_gui_prod_13_price_total }
				}
				missile_ui_update = yes
			}
			delete_button_13_click = {
				ROOT = {
					clr_country_flag = missile_construction_13

					remove_mission = missile_construction_13
				}
				missile_ui_update = yes
			}
			increase_CIC_13_button_click = {
				add_to_variable = { prod_13_multiplier = 1 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			decrease_CIC_13_button_click = {
				subtract_from_variable = { prod_13_multiplier = 1 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			increase_CIC_13_button_control_click = {
				add_to_variable = { prod_13_multiplier = 10 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			decrease_CIC_13_button_control_click = {
				subtract_from_variable = { prod_13_multiplier = 10 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			increase_CIC_13_button_shift_click = {
				add_to_variable = { prod_13_multiplier = 100 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			decrease_CIC_13_button_shift_click = {
				subtract_from_variable = { prod_13_multiplier = 100 }
				calculate_production_vars_13 = yes
				missile_ui_update = yes
			}
			### KILLSAT
			production_type_14_button_click = {
				ROOT = {
					set_country_flag = open_MD_missile_production_type_window
					set_country_flag = missile_production_type_14
					set_prod_display_arrays = yes
				}
				missile_ui_update = yes
			}
			### production amount button effects ###
			increase_amount_14_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_14_amount = 1 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_14_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_14_amount = 1 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_14_control_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_14_amount = 10 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_14_control_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_14_amount = 10 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			increase_amount_14_shift_click = {
				ROOT = {
					add_to_variable = { var_gui_prod_14_amount = 100 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			decrease_amount_14_shift_click = {
				ROOT = {
					subtract_from_variable = { var_gui_prod_14_amount = 100 }
					calculate_production_vars_14 = yes
				}
				missile_ui_update = yes
			}
			start_button_14_click = {
				ROOT = {
					set_country_flag = missile_construction_14
					activate_mission = missile_construction_14
					subtract_from_variable = { treasury = var_gui_prod_14_price_total }
				}
				missile_ui_update = yes
			}
			delete_button_14_click = {
				ROOT = {
					clr_country_flag = missile_construction_14

					remove_mission = missile_construction_14
				}
				missile_ui_update = yes
			}
			increase_CIC_14_button_click = {
				add_to_variable = { prod_14_multiplier = 1 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
			decrease_CIC_14_button_click = {
				subtract_from_variable = { prod_14_multiplier = 1 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
			increase_CIC_14_button_control_click = {
				add_to_variable = { prod_14_multiplier = 10 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
			decrease_CIC_14_button_control_click = {
				subtract_from_variable = { prod_14_multiplier = 10 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
			increase_CIC_14_button_shift_click = {
				add_to_variable = { prod_14_multiplier = 100 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
			decrease_CIC_14_button_shift_click = {
				subtract_from_variable = { prod_14_multiplier = 100 }
				calculate_production_vars_14 = yes
				missile_ui_update = yes
			}
		}

		triggers = {
			### OLV
			start_button_10_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
				custom_trigger_tooltip = {
					tooltip = has_selected_prod_10_trigger_TT
					check_variable = { var_gui_prod_10_missile_inventory_idx > 0 }
				}
			}
			delete_button_10_click_enabled = {
				has_country_flag = missile_construction_10
			}
			production_type_10_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
			}
			increase_amount_10_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
			}
			decrease_amount_10_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
				check_variable = { var_gui_prod_10_amount > 1 }
			}
			increase_CIC_10_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
				check_variable = { prod_10_multiplier < var_gui_prod_10_amount }
			}
			decrease_CIC_10_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
				check_variable = { prod_10_multiplier > 1 }
			}
			start_button_10_visible = {
				NOT = { has_country_flag = missile_construction_10 }
			}
			prod_icon_10_visible = {
				has_country_flag = missile_construction_10
			}
			prod_time_10_visible = {
				has_country_flag = missile_construction_10
			}
			delete_button_10_visible = {
				has_country_flag = missile_construction_10
			}
			### GNSS
			start_button_11_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
				custom_trigger_tooltip = {
					tooltip = has_selected_prod_11_trigger_TT
					check_variable = { var_gui_prod_11_missile_inventory_idx > 0 }
				}
			}
			delete_button_11_click_enabled = {
				has_country_flag = missile_construction_11
			}
			production_type_11_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
			}
			increase_amount_11_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
			}
			decrease_amount_11_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
				check_variable = { var_gui_prod_11_amount > 1 }
			}
			increase_CIC_11_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
				check_variable = { prod_11_multiplier < var_gui_prod_11_amount }
			}
			decrease_CIC_11_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
				check_variable = { prod_11_multiplier > 1 }
			}
			start_button_11_visible = {
				NOT = { has_country_flag = missile_construction_11 }
			}
			prod_icon_11_visible = {
				has_country_flag = missile_construction_11
			}
			prod_time_11_visible = {
				has_country_flag = missile_construction_11
			}
			delete_button_11_visible = {
				has_country_flag = missile_construction_11
			}
			### COMSAT
			start_button_12_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
				custom_trigger_tooltip = {
					tooltip = has_selected_prod_12_trigger_TT
					check_variable = { var_gui_prod_12_missile_inventory_idx > 0 }
				}
			}
			delete_button_12_click_enabled = {
				has_country_flag = missile_construction_12
			}
			production_type_12_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
			}
			increase_amount_12_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
			}
			decrease_amount_12_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
				check_variable = { var_gui_prod_12_amount > 1 }
			}
			increase_CIC_12_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
				check_variable = { prod_12_multiplier < var_gui_prod_12_amount }
			}
			decrease_CIC_12_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
				check_variable = { prod_12_multiplier > 1 }
			}
			start_button_12_visible = {
				NOT = { has_country_flag = missile_construction_12 }
			}
			prod_icon_12_visible = {
				has_country_flag = missile_construction_12
			}
			prod_time_12_visible = {
				has_country_flag = missile_construction_12
			}
			delete_button_12_visible = {
				has_country_flag = missile_construction_12
			}
			### SPYSAT
			start_button_13_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
				custom_trigger_tooltip = {
					tooltip = has_selected_prod_13_trigger_TT
					check_variable = { var_gui_prod_13_missile_inventory_idx > 0 }
				}
			}
			delete_button_13_click_enabled = {
				has_country_flag = missile_construction_13
			}
			production_type_13_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
			}
			increase_amount_13_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
			}
			decrease_amount_13_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
				check_variable = { var_gui_prod_13_amount > 1 }
			}
			increase_CIC_13_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
				check_variable = { prod_13_multiplier < var_gui_prod_13_amount }
			}
			decrease_CIC_13_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
				check_variable = { prod_13_multiplier > 1 }
			}
			start_button_13_visible = {
				NOT = { has_country_flag = missile_construction_13 }
			}
			prod_icon_13_visible = {
				has_country_flag = missile_construction_13
			}
			prod_time_13_visible = {
				has_country_flag = missile_construction_13
			}
			delete_button_13_visible = {
				has_country_flag = missile_construction_13
			}
			### KILLSAT
			start_button_14_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
				custom_trigger_tooltip = {
					tooltip = has_selected_prod_14_trigger_TT
					check_variable = { var_gui_prod_14_missile_inventory_idx > 0 }
				}
			}
			delete_button_14_click_enabled = {
				has_country_flag = missile_construction_14
			}
			production_type_14_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
			}
			increase_amount_14_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
			}
			decrease_amount_14_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
				check_variable = { var_gui_prod_14_amount > 1 }
			}
			increase_CIC_14_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
				check_variable = { prod_14_multiplier < var_gui_prod_14_amount }
			}
			decrease_CIC_14_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
				check_variable = { prod_14_multiplier > 1 }
			}
			start_button_14_visible = {
				NOT = { has_country_flag = missile_construction_14 }
			}
			prod_icon_14_visible = {
				has_country_flag = missile_construction_14
			}
			prod_time_14_visible = {
				has_country_flag = missile_construction_14
			}
			delete_button_14_visible = {
				has_country_flag = missile_construction_14
			}
			####
			production_type_10_button_click_enabled = {
				NOT = { has_country_flag = missile_production_type_1 }
				NOT = { has_country_flag = missile_production_type_2 }
				NOT = { has_country_flag = missile_production_type_3 }
				NOT = { has_country_flag = missile_production_type_4 }
				NOT = { has_country_flag = missile_production_type_5 }
				NOT = { has_country_flag = missile_production_type_6 }
				NOT = { has_country_flag = missile_production_type_7 }
				NOT = { has_country_flag = missile_production_type_8 }
				NOT = { has_country_flag = missile_production_type_9 }
				NOT = { has_country_flag = missile_production_type_10 }
				NOT = { has_country_flag = missile_production_type_11 }
				NOT = { has_country_flag = missile_production_type_12 }
				NOT = { has_country_flag = missile_production_type_13 }
				NOT = { has_country_flag = missile_production_type_14 }
				NOT = { has_country_flag = missile_production_type_15 }
			}
			production_type_11_button_click_enabled = {
				NOT = { has_country_flag = missile_production_type_1 }
				NOT = { has_country_flag = missile_production_type_2 }
				NOT = { has_country_flag = missile_production_type_3 }
				NOT = { has_country_flag = missile_production_type_4 }
				NOT = { has_country_flag = missile_production_type_5 }
				NOT = { has_country_flag = missile_production_type_6 }
				NOT = { has_country_flag = missile_production_type_7 }
				NOT = { has_country_flag = missile_production_type_8 }
				NOT = { has_country_flag = missile_production_type_9 }
				NOT = { has_country_flag = missile_production_type_10 }
				NOT = { has_country_flag = missile_production_type_11 }
				NOT = { has_country_flag = missile_production_type_12 }
				NOT = { has_country_flag = missile_production_type_13 }
				NOT = { has_country_flag = missile_production_type_14 }
				NOT = { has_country_flag = missile_production_type_15 }
			}
			production_type_12_button_click_enabled = {
				NOT = { has_country_flag = missile_production_type_1 }
				NOT = { has_country_flag = missile_production_type_2 }
				NOT = { has_country_flag = missile_production_type_3 }
				NOT = { has_country_flag = missile_production_type_4 }
				NOT = { has_country_flag = missile_production_type_5 }
				NOT = { has_country_flag = missile_production_type_6 }
				NOT = { has_country_flag = missile_production_type_7 }
				NOT = { has_country_flag = missile_production_type_8 }
				NOT = { has_country_flag = missile_production_type_9 }
				NOT = { has_country_flag = missile_production_type_10 }
				NOT = { has_country_flag = missile_production_type_11 }
				NOT = { has_country_flag = missile_production_type_12 }
				NOT = { has_country_flag = missile_production_type_13 }
				NOT = { has_country_flag = missile_production_type_14 }
				NOT = { has_country_flag = missile_production_type_15 }
			}
			production_type_13_button_click_enabled = {
				NOT = { has_country_flag = missile_production_type_1 }
				NOT = { has_country_flag = missile_production_type_2 }
				NOT = { has_country_flag = missile_production_type_3 }
				NOT = { has_country_flag = missile_production_type_4 }
				NOT = { has_country_flag = missile_production_type_5 }
				NOT = { has_country_flag = missile_production_type_6 }
				NOT = { has_country_flag = missile_production_type_7 }
				NOT = { has_country_flag = missile_production_type_8 }
				NOT = { has_country_flag = missile_production_type_9 }
				NOT = { has_country_flag = missile_production_type_10 }
				NOT = { has_country_flag = missile_production_type_11 }
				NOT = { has_country_flag = missile_production_type_12 }
				NOT = { has_country_flag = missile_production_type_13 }
				NOT = { has_country_flag = missile_production_type_14 }
				NOT = { has_country_flag = missile_production_type_15 }
			}
			production_type_14_button_click_enabled = {
				NOT = { has_country_flag = missile_production_type_1 }
				NOT = { has_country_flag = missile_production_type_2 }
				NOT = { has_country_flag = missile_production_type_3 }
				NOT = { has_country_flag = missile_production_type_4 }
				NOT = { has_country_flag = missile_production_type_5 }
				NOT = { has_country_flag = missile_production_type_6 }
				NOT = { has_country_flag = missile_production_type_7 }
				NOT = { has_country_flag = missile_production_type_8 }
				NOT = { has_country_flag = missile_production_type_9 }
				NOT = { has_country_flag = missile_production_type_10 }
				NOT = { has_country_flag = missile_production_type_11 }
				NOT = { has_country_flag = missile_production_type_12 }
				NOT = { has_country_flag = missile_production_type_13 }
				NOT = { has_country_flag = missile_production_type_14 }
				NOT = { has_country_flag = missile_production_type_15 }
			}
		}

		properties = {
			### OLV
			prod_icon_10 = { image = "GFX_MD_prod_icon" frame = 2 }
			production_type_10_model_icon = { image = "[prod_10_icon_gui_texture]" }
			### GNSS
			prod_icon_11 = { image = "GFX_MD_prod_icon" frame = 2 }
			production_type_11_model_icon = { image = "[prod_11_icon_gui_texture]" }
			### COMSAT
			prod_icon_12 = { image = "GFX_MD_prod_icon" frame = 2 }
			production_type_12_model_icon = { image = "[prod_12_icon_gui_texture]" }
			### SPYSAT
			prod_icon_13 = { image = "GFX_MD_prod_icon" frame = 2 }
			production_type_13_model_icon = { image = "[prod_13_icon_gui_texture]" }
			### KILLSAT
			prod_icon_14 = { image = "GFX_MD_prod_icon" frame = 2 }
			production_type_14_model_icon = { image = "[prod_14_icon_gui_texture]" }
		}
	}

	MD_missile_production_type_window_gui = {
		window_name = MD_missile_production_type_window
		context_type = player_context
		parent_window_token = MD_countrymissilesview_production

		dirty = global.missile_ui_updated

		visible = {
			has_country_flag = open_MD_missile_production_type_window
		}

		effects = {
			### OLV
			missile_type_10_button_click = {
				set_variable = { var_gui_prod_10_missile_inventory_idx = prod_10_display_array^i }
				set_variable = { var_gui_prod_10_price_unit = global.prod_10_price_unit^i }
				set_variable = { var_gui_prod_10_days_unit = global.prod_10_duration_unit^i }
				if = {
					limit = {
						has_tech = part_reusable_OLV6
						check_variable = { prod_10_display_array^i = 106 }
					}
					add_to_variable = { var_gui_prod_10_price_unit = -0.005 }
					add_to_variable = { var_gui_prod_10_days_unit = -10 }
				}
				if = {
					limit = {
						has_tech = full_reusable_OLV7
						check_variable = { prod_10_display_array^i = 107 }
					}
					add_to_variable = { var_gui_prod_10_price_unit = -0.01 }
					add_to_variable = { var_gui_prod_10_days_unit = -25 }
				}
				if = {
					limit = {
						has_tech = full_reusable_OLV8
						check_variable = { prod_10_display_array^i = 108 }
					}
					add_to_variable = { var_gui_prod_10_price_unit = -0.03 }
					add_to_variable = { var_gui_prod_10_days_unit = -45 }
				}
				set_variable = { var_gui_prod_10_amount = 1 }
				set_variable = { prod_10_multiplier = 1 }
				calculate_production_vars_10 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_10
				missile_ui_update = yes
			}
			### GNSS
			missile_type_11_button_click = {
				set_variable = { var_gui_prod_11_missile_inventory_idx = prod_11_display_array^i }
				set_variable = { var_gui_prod_11_price_unit = global.prod_11_price_unit^i }
				set_variable = { var_gui_prod_11_days_unit = global.prod_11_duration_unit^i }
				set_variable = { var_gui_prod_11_amount = 1 }
				set_variable = { prod_11_multiplier = 1 }
				calculate_production_vars_11 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_11
				missile_ui_update = yes
			}
			### COMSAT
			missile_type_12_button_click = {
				set_variable = { var_gui_prod_12_missile_inventory_idx = prod_12_display_array^i }
				set_variable = { var_gui_prod_12_price_unit = global.prod_12_price_unit^i }
				set_variable = { var_gui_prod_12_days_unit = global.prod_12_duration_unit^i }
				set_variable = { var_gui_prod_12_amount = 1 }
				set_variable = { prod_12_multiplier = 1 }
				calculate_production_vars_12 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_12
				missile_ui_update = yes
			}
			### SPYSAT
			missile_type_13_button_click = {
				set_variable = { var_gui_prod_13_missile_inventory_idx = prod_13_display_array^i }
				set_variable = { var_gui_prod_13_price_unit = global.prod_13_price_unit^i }
				set_variable = { var_gui_prod_13_days_unit = global.prod_13_duration_unit^i }
				set_variable = { var_gui_prod_13_amount = 1 }
				set_variable = { prod_13_multiplier = 1 }
				calculate_production_vars_13 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_13
				missile_ui_update = yes
			}
			### KILLSAT
			missile_type_14_button_click = {
				set_variable = { var_gui_prod_14_missile_inventory_idx = prod_14_display_array^i }
				set_variable = { var_gui_prod_14_price_unit = global.prod_14_price_unit^i }
				set_variable = { var_gui_prod_14_days_unit = global.prod_14_duration_unit^i }
				set_variable = { var_gui_prod_14_amount = 1 }
				set_variable = { prod_14_multiplier = 1 }
				calculate_production_vars_14 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_14
				missile_ui_update = yes
			}
			### Rods
			missile_type_15_button_click = {
				set_variable = { var_gui_prod_15_missile_inventory_idx = prod_15_display_array^i }
				set_variable = { var_gui_prod_15_price_unit = global.prod_15_price_unit^i }
				set_variable = { var_gui_prod_15_days_unit = global.prod_15_duration_unit^i }
				set_variable = { var_gui_prod_15_amount = 1 }
				set_variable = { prod_15_multiplier = 1 }
				calculate_production_vars_15 = yes

				clear_prod_display_arrays = yes
				clr_country_flag = open_MD_missile_production_type_window
				clr_country_flag = missile_production_type_15
				missile_ui_update = yes
			}

			close_button_click = {
				clear_prod_display_arrays = yes
				if = {
					limit = {
						has_country_flag = open_MD_missile_production_type_window
					}
					clr_country_flag = open_MD_missile_production_type_window
				}
				missile_ui_update = yes
			}
		}

		triggers = {
			### OLV
			missile_type_10_button_visible = {
				has_country_flag = missile_production_type_10
			}
			missile_type_10_icon_visible = {
				has_country_flag = missile_production_type_10
			}
			missile_model_name_10_visible = {
				has_country_flag = missile_production_type_10
			}
			missile_type_10_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_10 }
			}
			### GNSS
			missile_type_11_button_visible = {
				has_country_flag = missile_production_type_11
			}
			missile_type_11_icon_visible = {
				has_country_flag = missile_production_type_11
			}
			missile_model_name_11_visible = {
				has_country_flag = missile_production_type_11
			}
			missile_type_11_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_11 }
			}
			### COMSAT
			missile_type_12_button_visible = {
				has_country_flag = missile_production_type_12
			}
			missile_type_12_icon_visible = {
				has_country_flag = missile_production_type_12
			}
			missile_model_name_12_visible = {
				has_country_flag = missile_production_type_12
			}
			missile_type_12_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_12 }
			}
			### SPYSAT
			missile_type_13_button_visible = {
				has_country_flag = missile_production_type_13
			}
			missile_type_13_icon_visible = {
				has_country_flag = missile_production_type_13
			}
			missile_model_name_13_visible = {
				has_country_flag = missile_production_type_13
			}
			missile_type_13_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_13 }
			}
			### KILLSAT
			missile_type_14_button_visible = {
				has_country_flag = missile_production_type_14
			}
			missile_type_14_icon_visible = {
				has_country_flag = missile_production_type_14
			}
			missile_model_name_14_visible = {
				has_country_flag = missile_production_type_14
			}
			missile_type_14_button_click_enabled = {
				NOT = { has_country_flag = missile_construction_14 }
			}
		}
		properties = {
			### OLV
			missile_type_10_icon = {
				image = "[prod_10_icon_texture]"
			}
			### GNSS
			missile_type_11_icon = {
				image = "[prod_11_icon_texture]"
			}
			### COMSAT
			missile_type_12_icon = {
				image = "[prod_12_icon_texture]"
			}
			### SPYSAT
			missile_type_13_icon = {
				image = "[prod_13_icon_texture]"
			}
			### KILLSAT
			missile_type_14_icon = {
				image = "[prod_14_icon_texture]"
			}
		}

		dynamic_lists = {
			### OLV
			production_types_10_gridbox = {
				array = prod_10_display_array
				entry_container = missile_type_10_entry
			}
			### GNSS
			production_types_11_gridbox = {
				array = prod_11_display_array
				entry_container = missile_type_11_entry
			}
			### COMSAT
			production_types_12_gridbox = {
				array = prod_12_display_array
				entry_container = missile_type_12_entry
			}
			### SPYSAT
			production_types_13_gridbox = {
				array = prod_13_display_array
				entry_container = missile_type_13_entry
			}
			### KILLSAT
			production_types_14_gridbox = {
				array = prod_14_display_array
				entry_container = missile_type_14_entry
			}
		}
	}

	MD_countrymissilesview_space_gui = {
		window_name = MD_countrymissilesview_space
		context_type = player_context
		parent_window_name = MD_countrymissilesview

		dirty = global.missile_ui_updated

		visible = {
			check_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
			has_country_flag = open_MD_countrymissilesview
		}

		effects = {
			OLV_model_button_click = {
				ROOT = {
					set_OLV_display_array = yes
					set_country_flag = open_MD_space_selection_window
					set_country_flag = OLV_model
				}
				missile_ui_update = yes
			}
			payload_button_click = {
				ROOT = {
					set_variable = { var_open_space_selection_ledger_1 = 2 }
					set_sat_payload_display_array = yes
					set_country_flag = open_MD_space_selection_window
					set_country_flag = sat_payload_model
				}
				missile_ui_update = yes
			}
			clear_payload_button_click = {
				clear_payload_types = yes
				missile_ui_update = yes
			}
			OLV_flights_small_plus_button_bg_click = {
				ROOT = {
					add_to_variable = { var_OLV_flights = 1 }
				}
				missile_ui_update = yes
			}
			OLV_flights_small_minus_button_bg_click = {
				ROOT = {
					subtract_from_variable = { var_OLV_flights = 1 }
				}
				missile_ui_update = yes
			}
			OLV_flights_small_plus_button_bg_control_click = {
				ROOT = {
					add_to_variable = { var_OLV_flights = 10 }
				}
				missile_ui_update = yes
			}
			OLV_flights_small_minus_button_bg_control_click = {
				ROOT = {
					subtract_from_variable = { var_OLV_flights = 10 }
					if = {
						limit = {
							check_variable = { var_OLV_flights < 0 }
						}
						set_variable = { var_OLV_flights = 0 }
					}
				}
				missile_ui_update = yes
			}
			OLV_flights_small_plus_button_bg_shift_click = {
				ROOT = {
					add_to_variable = { var_OLV_flights = 100 }
				}
				missile_ui_update = yes
			}
			OLV_flights_small_minus_button_bg_shift_click = {
				ROOT = {
					subtract_from_variable = { var_OLV_flights = 100 }
					if = {
						limit = {
							check_variable = { var_OLV_flights < 0 }
						}
						set_variable = { var_OLV_flights = 0 }
					}
				}
				missile_ui_update = yes
			}
			OLV_launch_button_click = {
				launch_OLV = yes
				### update orbit stat
				set_variable = { orbit_selected_TAG = ROOT.id }
				set_sat_access_arrays_selected_TAG = yes
				set_satellites_gui = yes
				missile_ui_update = yes
			}
			ASAT_model_button_click = {
				ROOT = {
					set_ASAT_display_array = yes
					set_country_flag = open_MD_space_selection_window
					set_country_flag = ASAT_model
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_plus_button_bg_click = {
				ROOT = {
					add_to_variable = { var_ASAT_salvo = 1 }
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_minus_button_bg_click = {
				ROOT = {
					subtract_from_variable = { var_ASAT_salvo = 1 }
					if = {
						limit = {
							check_variable = { var_ASAT_salvo < 0 }
						}
						set_variable = { var_ASAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_plus_button_bg_control_click = {
				ROOT = {
					add_to_variable = { var_ASAT_salvo = 10 }
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_minus_button_bg_control_click = {
				ROOT = {
					subtract_from_variable = { var_ASAT_salvo = 10 }
					if = {
						limit = {
							check_variable = { var_ASAT_salvo < 0 }
						}
						set_variable = { var_ASAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_plus_button_bg_shift_click = {
				ROOT = {
					add_to_variable = { var_ASAT_salvo = 100 }
				}
				missile_ui_update = yes
			}
			ASAT_salvo_small_minus_button_bg_shift_click = {
				ROOT = {
					subtract_from_variable = { var_ASAT_salvo = 100 }
					if = {
						limit = {
							check_variable = { var_ASAT_salvo < 0 }
						}
						set_variable = { var_ASAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			ASAT_button_click = {
				set_variable = { ROOT.var_anti_sat_accuracy = ROOT.var_ASAT_accuracy }
				set_variable = { ROOT.var_anti_satellite_weapon_num = ROOT.var_ASAT_salvo }
				anti_satellite_weapon_use = yes
				subtract_from_variable = { ROOT.missile_inventory_array^var_ASAT_type = ROOT.var_ASAT_salvo }
				set_variable = { ROOT.var_ASAT_inventory = ROOT.missile_inventory_array^var_ASAT_type }
				set_variable = { ROOT.var_ASAT_salvo = 0 }
				missile_ui_update = yes
			}
			KILLSAT_model_button_click = {
				ROOT = {
					set_KILLSAT_display_array = yes
					set_country_flag = open_MD_space_selection_window
					set_country_flag = KILLSAT_model
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_plus_button_bg_click = {
				ROOT = {
					add_to_variable = { var_KILLSAT_salvo = 1 }
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_minus_button_bg_click = {
				ROOT = {
					subtract_from_variable = { var_KILLSAT_salvo = 1 }
					if = {
						limit = {
							check_variable = { var_KILLSAT_salvo < 0 }
						}
						set_variable = { var_KILLSAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_plus_button_bg_control_click = {
				ROOT = {
					add_to_variable = { var_KILLSAT_salvo = 10 }
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_minus_button_bg_control_click = {
				ROOT = {
					subtract_from_variable = { var_KILLSAT_salvo = 10 }
					if = {
						limit = {
							check_variable = { var_KILLSAT_salvo < 0 }
						}
						set_variable = { var_KILLSAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_plus_button_bg_shift_click = {
				ROOT = {
					add_to_variable = { var_KILLSAT_salvo = 100 }
				}
				missile_ui_update = yes
			}
			KILLSAT_salvo_small_minus_button_bg_shift_click = {
				ROOT = {
					subtract_from_variable = { var_KILLSAT_salvo = 100 }
					if = {
						limit = {
							check_variable = { var_KILLSAT_salvo < 0 }
						}
						set_variable = { var_KILLSAT_salvo = 0 }
					}
				}
				missile_ui_update = yes
			}
			activate_killsat_button_click = {
				set_variable = { ROOT.var_anti_sat_accuracy = ROOT.var_KILLSAT_accuracy }
				set_variable = { ROOT.var_anti_satellite_weapon_num = ROOT.var_KILLSAT_salvo }
				anti_satellite_weapon_use = yes
				remove_killsat_used = yes
				missile_ui_update = yes
			}
			rods_search_target_button_click = {
				if = {
					limit = { has_country_flag = rods_search_target }
					clr_country_flag = rods_search_target
				}
				else = {
					set_country_flag = rods_search_target
				}
			}
		}
		triggers = {
			OLV_model_button_click_enabled = {
				NOT = {
					has_country_flag = open_MD_space_selection_window
				}
			}
			payload_button_click_enabled = {
				NOT = {
					has_country_flag = open_MD_space_selection_window
				}
			}
			ASAT_model_button_click_enabled = {
				NOT = {
					has_country_flag = open_MD_space_selection_window
				}
			}
			KILLSAT_model_button_click_enabled = {
				NOT = {
					has_country_flag = open_MD_space_selection_window
				}
			}
			KILLSAT_salvo_small_minus_button_bg_click_enabled = {
				check_variable = { var_KILLSAT_salvo > 0 }
			}
			RODS_model_button_click_enabled = {
				NOT = {
					has_country_flag = open_MD_space_selection_window
				}
			}
			OLV_launch_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = OLV_LAUNCH_BUTTON_TT_trigger_1
					OR = {
						check_variable = { var_launch_mass < var_OLV_payload_mass }
						check_variable = { var_launch_mass = var_OLV_payload_mass }
					}
				}
				custom_trigger_tooltip = {
					tooltip = OLV_LAUNCH_BUTTON_TT_trigger_2
					OR = {
						check_variable = { var_OLV_flights < var_OLV_inventory }
						check_variable = { var_OLV_flights = var_OLV_inventory }
					}
				}
				custom_trigger_tooltip = {
					tooltip = OLV_LAUNCH_BUTTON_TT_trigger_3
					check_variable = { var_OLV_flights > 0 }
				}
			}
			OLV_flights_small_minus_button_bg_click_enabled = {
				check_variable = { var_OLV_flights > 0 }
			}
			ASAT_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = ASAT_salvo_trigger_1_TT
					check_variable = { var_ASAT_salvo > 0 }
				}
				custom_trigger_tooltip = {
					tooltip = ASAT_salvo_trigger_2_TT
					OR = {
						check_variable = { var_ASAT_salvo < var_ASAT_inventory }
						check_variable = { var_ASAT_salvo = var_ASAT_inventory }
					}
				}
				custom_trigger_tooltip = {
					tooltip = has_target_list_TT
					check_variable = { ROOT.sat_target_array^num > 0 }
				}
				custom_trigger_tooltip = {
					tooltip = has_war_sat_trigger_TT
					all_of_scopes = {
						array = ROOT.sat_target_TAG_array

						ROOT = { has_war_with = PREV }
					}
				}
			}
			ASAT_salvo_small_minus_button_bg_click_enabled = {
				check_variable = { var_ASAT_salvo > 0 }
			}
			activate_killsat_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KILLSAT_salvo_trigger_1_TT
					check_variable = { var_KILLSAT_salvo > 0 }
				}
				custom_trigger_tooltip = {
					tooltip = KILLSAT_salvo_trigger_2_TT
					OR = {
						check_variable = { var_KILLSAT_salvo < var_KILLSAT_orbit }
						check_variable = { var_KILLSAT_salvo = var_KILLSAT_orbit }
					}
				}
				custom_trigger_tooltip = {
					tooltip = has_target_list_TT
					check_variable = { ROOT.sat_target_array^num > 0 }
				}
				custom_trigger_tooltip = {
					tooltip = has_war_sat_trigger_TT
					all_of_scopes = {
						array = ROOT.sat_target_TAG_array

						ROOT = { has_war_with = PREV }
					}
				}
			}
		}
		properties = {
			### OLV
			OLV_model_icon = {
				image = "[OLV_selected_icon_texture]"
			}
			payload_icon = {
				image = "[payload_icon_selected_texture]"
			}
			ASAT_model_icon = {
				image = "[ASAT_selected_icon_texture]"
			}
			KILLSAT_model_icon = {
				image = "[KILLSAT_selected_icon_texture]"
			}
		}
		dynamic_lists = {
			payload_types_gridbox = {
				array = payload_types_array # one element per type, value = tech lvl
				entry_container = payload_type_entry
			}
		}
	}

	MD_space_selection_window_gui = {
		window_name = MD_space_selection_window
		context_type = player_context
		parent_window_token = MD_countrymissilesview_space

		dirty = global.missile_ui_updated

		visible = {
			has_country_flag = open_MD_space_selection_window
		}

		effects = {
			OLV_type_button_click = {
				set_variable = { var_OLV_type = OLV_display_array^i }
				set_variable = { var_OLV_reliability = global.OLV_reliability_array^i }
				set_variable = { var_OLV_payload_mass = global.OLV_payload_mass_array^i }
				set_variable = { var_OLV_inventory = missile_inventory_array^OLV_display_array^i }
				clear_array = OLV_display_array
				clr_country_flag = OLV_model
				clr_country_flag = open_MD_space_selection_window
				missile_ui_update = yes
			}
			sat_payload_type_button_click = {
				if = {
					limit = {
						check_variable = { payload_types_array^0 = 1 }
					}
					set_variable = { payload_types_array^0 = sat_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^1 = 1 }
					}
					set_variable = { payload_types_array^1 = sat_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^2 = 1 }
					}
					set_variable = { payload_types_array^2 = sat_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^3 = 1 }
					}
					set_variable = { payload_types_array^3 = sat_payload_display_array^i }
				}
				else = {
					add_to_array = { payload_types_array = sat_payload_display_array^i }
				}
				add_to_variable = { var_launch_mass = global.sat_mass_array^i }
				#set_variable = { var_OLV_payload_mass = global.OLV_payload_mass_array^i }
				clear_array = sat_payload_display_array
				clr_country_flag = sat_payload_model
				clr_country_flag = open_MD_space_selection_window
				missile_ui_update = yes
			}
			spp_payload_type_button_click = {
				if = {
					limit = {
						check_variable = { payload_types_array^0 = 1 }
					}
					set_variable = { payload_types_array^0 = spp_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^1 = 1 }
					}
					set_variable = { payload_types_array^1 = spp_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^2 = 1 }
					}
					set_variable = { payload_types_array^2 = spp_payload_display_array^i }
				}
				else_if = {
					limit = {
						check_variable = { payload_types_array^3 = 1 }
					}
					set_variable = { payload_types_array^3 = spp_payload_display_array^i }
				}
				else = {
					add_to_array = { payload_types_array = spp_payload_display_array^i }
				}
				add_to_variable = { var_launch_mass = global.spp_mass_array^i }
				#set_variable = { var_OLV_payload_mass = global.OLV_payload_mass_array^i }
				clear_array = spp_payload_display_array
				clr_country_flag = spp_payload_model
				clr_country_flag = open_MD_space_selection_window
				missile_ui_update = yes
			}
			space_selection_ledger_btn_1_click = {
				set_variable = { var_open_space_selection_ledger_1 = 2 }
				clear_variable = var_open_space_selection_ledger_2
				set_sat_payload_display_array = yes
				set_country_flag = sat_payload_model
				clear_array = spp_payload_display_array
				clr_country_flag = spp_payload_model
				clear_array = OLV_display_array
				clr_country_flag = OLV_model
				missile_ui_update = yes
			}
			space_selection_ledger_btn_2_click = {
				set_variable = { var_open_space_selection_ledger_2 = 2 }
				clear_variable = var_open_space_selection_ledger_1
				set_spp_payload_display_array = yes
				set_country_flag = spp_payload_model
				clear_array = sat_payload_display_array
				clr_country_flag = sat_payload_model
				clear_array = OLV_display_array
				clr_country_flag = OLV_model
				missile_ui_update = yes
			}
			ASAT_type_button_click = {
				set_variable = { var_ASAT_type = ASAT_display_array^i }
				set_variable = { var_ASAT_accuracy = global.ASAT_accuracy_array^i }
				set_variable = { var_ASAT_inventory = missile_inventory_array^ASAT_display_array^i }
				clear_array = ASAT_display_array
				clr_country_flag = ASAT_model
				clr_country_flag = open_MD_space_selection_window
				missile_ui_update = yes
			}
			KILLSAT_type_button_click = {
				set_variable = { var_KILLSAT_type = KILLSAT_display_array^i }
				set_variable = { var_KILLSAT_accuracy = global.KILLSAT_accuracy_array^i }
				set_variable = { var_KILLSAT_orbit = KILL_satellite_array^i }
				clear_array = KILLSAT_display_array
				clr_country_flag = KILLSAT_model
				clr_country_flag = open_MD_space_selection_window
				missile_ui_update = yes
			}
			close_button_click = {
				clear_array = OLV_display_array
				clear_array = sat_payload_display_array
				clear_array = spp_payload_display_array
				clr_country_flag = OLV_model
				clr_country_flag = sat_payload_model
				clr_country_flag = spp_payload_model
				clear_variable = var_open_space_selection_ledger_1
				clear_variable = var_open_space_selection_ledger_2
				if = {
					limit = {
						has_country_flag = open_MD_space_selection_window
					}
					clr_country_flag = open_MD_space_selection_window
				}
				missile_ui_update = yes
			}
		}
		triggers = {
			### OLV
			OLV_type_button_visible = {
				has_country_flag = OLV_model
			}
			OLV_type_icon_visible = {
				has_country_flag = OLV_model
			}
			OLV_type_model_name_visible = {
				has_country_flag = OLV_model
			}
			OLV_type_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = has_OLV_inventory_TT
					check_variable = { missile_inventory_array^OLV_display_array^i > 0 }
				}
			}
			### sat_payload
			sat_payload_type_button_visible = {
				has_country_flag = sat_payload_model
			}
			sat_payload_type_icon_visible = {
				has_country_flag = sat_payload_model
			}
			sat_payload_type_model_name_visible = {
				has_country_flag = sat_payload_model
			}
			sat_payload_type_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = has_SAT_inventory_TT
					check_variable = { missile_inventory_array^sat_payload_display_array^i > 0 }
				}
			}
			### spp_payload
			spp_payload_type_button_visible = {
				has_country_flag = spp_payload_model
			}
			spp_payload_type_icon_visible = {
				has_country_flag = spp_payload_model
			}
			spp_payload_type_model_name_visible = {
				has_country_flag = spp_payload_model
			}
			spp_payload_type_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = has_SPP_inventory_TT
					check_variable = { spp_inventory_array^i > 0 }
				}
			}
			#
			space_selection_ledger_btn_1_visible = {
				OR = {
					has_country_flag = sat_payload_model
					has_country_flag = spp_payload_model
				}
			}
			icon_space_selection_btn_1_visible = {
				OR = {
					has_country_flag = sat_payload_model
					has_country_flag = spp_payload_model
				}
			}
			space_selection_ledger_btn_2_visible = {
				OR = {
					has_country_flag = sat_payload_model
					has_country_flag = spp_payload_model
				}
			}
			icon_space_selection_btn_2_visible = {
				OR = {
					has_country_flag = sat_payload_model
					has_country_flag = spp_payload_model
				}
			}
			### ASAT
			ASAT_type_button_visible = {
				has_country_flag = ASAT_model
			}
			ASAT_type_icon_visible = {
				has_country_flag = ASAT_model
			}
			ASAT_type_model_name_visible = {
				has_country_flag = ASAT_model
			}
			ASAT_type_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = has_ASAT_inventory_TT
					check_variable = { missile_inventory_array^ASAT_display_array^i > 0 }
				}
			}
			### KILLSAT
			KILLSAT_type_button_visible = {
				has_country_flag = KILLSAT_model
			}
			KILLSAT_type_icon_visible = {
				has_country_flag = KILLSAT_model
			}
			KILLSAT_type_model_name_visible = {
				has_country_flag = KILLSAT_model
			}
			KILLSAT_type_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = has_KILLSAT_orbit_TT
					check_variable = { KILL_satellite_array^i > 0 }
				}
			}
		}
		properties = {
			OLV_type_icon = {
				image = "[OLV_type_icon_texture]"
			}
			sat_payload_type_icon = {
				image = "[sat_payload_type_icon_texture]"
			}
			spp_payload_type_icon = {
				image = "[spp_payload_type_icon_texture]"
			}
			space_selection_ledger_btn_1 = {
				frame = var_open_space_selection_ledger_1
			}
			space_selection_ledger_btn_2 = {
				frame = var_open_space_selection_ledger_2
			}
			ASAT_type_icon = {
				image = "[ASAT_type_icon_texture]"
			}
			KILLSAT_type_icon = {
				image = "[KILLSAT_type_icon_texture]"
			}
		}
		dynamic_lists = {
			OLV_types_gridbox = {
				array = OLV_display_array # one element per type, value = tech lvl
				entry_container = OLV_type_entry
				#change_scope = yes
			}
			sat_payload_types_gridbox = {
				array = sat_payload_display_array # one element per type, value = tech lvl
				entry_container = sat_payload_type_entry
				#change_scope = yes
			}
			spp_payload_types_gridbox = {
				array = spp_payload_display_array # one element per type, value = tech lvl
				entry_container = spp_payload_type_entry
				#change_scope = yes
			}
			ASAT_gridbox = {
				array = ASAT_display_array # one element per type, value = tech lvl
				entry_container = ASAT_type_entry
				#change_scope = yes
			}
			KILLSAT_gridbox = {
				array = KILLSAT_display_array # one element per type, value = tech lvl
				entry_container = KILLSAT_type_entry
				#change_scope = yes
			}
		}
	}

	MD_countrymissilesview_satellites_gui = {
		window_name = MD_countrymissilesview_satellites
		context_type = player_context
		parent_window_name = MD_countrymissilesview

		dirty = global.missile_ui_updated

		visible = {
			check_variable = { var_open_MD_missiles_gui_ledger_5 = 2 }
			has_country_flag = open_MD_countrymissilesview
		}

		effects = {
			### GNSS
			GNSS_mil_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_GNSS_mil_systems = yes
				missile_ui_update = yes
			}
			GNSS_civ_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_GNSS_civ_systems = yes
				missile_ui_update = yes
			}
			### COM
			COM_mil_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_COM_mil_systems = yes
				missile_ui_update = yes
			}
			COM_civ_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_COM_civ_systems = yes
				missile_ui_update = yes
			}
			### SPY
			SPY_mil_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_SPY_mil_systems = yes
				missile_ui_update = yes
			}
			SPY_civ_button_click = {
				set_country_flag = open_MD_select_satellite_system_window
				set_SPY_civ_systems = yes
				missile_ui_update = yes
			}
		}

		properties = {
			GNSS_mil_treaty_flags_button = {
				image = "[?ROOT.GNSS_mil_treaty_array^i.GetFlag]"
			}
			GNSS_mil_access_flags_button = {
				image = "[?ROOT.GNSS_mil_access_array^i.GetFlag]"
			}
			GNSS_civ_treaty_flags_button = {
				image = "[?ROOT.GNSS_civ_treaty_array^i.GetFlag]"
			}
			GNSS_civ_access_flags_button = {
				image = "[?ROOT.GNSS_civ_access_array^i.GetFlag]"
			}
			COM_mil_treaty_flags_button = {
				image = "[?ROOT.COM_mil_treaty_array^i.GetFlag]"
			}
			COM_mil_access_flags_button = {
				image = "[?ROOT.COM_mil_access_array^i.GetFlag]"
			}
			COM_civ_treaty_flags_button = {
				image = "[?ROOT.COM_civ_treaty_array^i.GetFlag]"
			}
			COM_civ_access_flags_button = {
				image = "[?ROOT.COM_civ_access_array^i.GetFlag]"
			}
			SPY_mil_treaty_flags_button = {
				image = "[?ROOT.SPY_mil_treaty_array^i.GetFlag]"
			}
			SPY_mil_access_flags_button = {
				image = "[?ROOT.SPY_mil_access_array^i.GetFlag]"
			}
			SPY_civ_treaty_flags_button = {
				image = "[?ROOT.SPY_civ_treaty_array^i.GetFlag]"
			}
			SPY_civ_access_flags_button = {
				image = "[?ROOT.SPY_civ_access_array^i.GetFlag]"
			}
		}

		dynamic_lists = {
			## GNSS
			GNSS_mil_treaty_gridbox = {
				array = ROOT.GNSS_mil_treaty_array
				entry_container = GNSS_mil_treaty_entry
			}
			GNSS_mil_access_gridbox = {
				array = ROOT.GNSS_mil_access_array
				entry_container = GNSS_mil_access_entry
			}
			GNSS_civ_treaty_gridbox = {
				array = ROOT.GNSS_civ_treaty_array
				entry_container = GNSS_civ_treaty_entry
			}
			GNSS_civ_access_gridbox = {
				array = ROOT.GNSS_civ_access_array
				entry_container = GNSS_civ_access_entry
			}
			## COM
			COM_mil_treaty_gridbox = {
				array = ROOT.COM_mil_treaty_array
				entry_container = COM_mil_treaty_entry
			}
			COM_mil_access_gridbox = {
				array = ROOT.COM_mil_access_array
				entry_container = COM_mil_access_entry
			}
			COM_civ_treaty_gridbox = {
				array = ROOT.COM_civ_treaty_array
				entry_container = COM_civ_treaty_entry
			}
			COM_civ_access_gridbox = {
				array = ROOT.COM_civ_access_array
				entry_container = COM_civ_access_entry
			}
			## SPY
			SPY_mil_treaty_gridbox = {
				array = ROOT.SPY_mil_treaty_array
				entry_container = SPY_mil_treaty_entry
			}
			SPY_mil_access_gridbox = {
				array = ROOT.SPY_mil_access_array
				entry_container = SPY_mil_access_entry
			}
			SPY_civ_treaty_gridbox = {
				array = ROOT.SPY_civ_treaty_array
				entry_container = SPY_civ_treaty_entry
			}
			SPY_civ_access_gridbox = {
				array = ROOT.SPY_civ_access_array
				entry_container = SPY_civ_access_entry
			}
		}
	}

	MD_select_satellite_system_window_gui = {
		window_name = MD_select_satellite_system_window
		context_type = player_context
		parent_window_token = MD_countrymissilesview_satellites

		dirty = global.missile_ui_updated

		visible = {
			has_country_flag = open_MD_select_satellite_system_window
		}

		effects = {
			GNSS_mil_button_click = {
				set_variable = { var_GNSS_mil_system_idx = GNSS_mil_systems_array^i }
				set_variable = { var_GNSS_mil_sat_system_max = global.GNSS_sat_system_max_array^i }
				set_variable = { var_GNSS_mil_army_speed_factor = GNSS_mil_army_speed_factor_array^i }
				set_variable = { var_GNSS_mil_air_cas_efficiency = GNSS_mil_air_cas_efficiency_array^i }
				set_variable = { var_GNSS_mil_air_nav_efficiency = GNSS_mil_air_nav_efficiency_array^i }
				set_variable = { var_GNSS_mil_air_strategic_bomber_bombing_factor = GNSS_mil_air_strategic_bomber_bombing_factor_array^i }
				set_variable = { var_GNSS_mil_positioning = GNSS_mil_positioning_array^i }
				set_variable = { var_GNSS_mil_naval_hit_chance = GNSS_mil_naval_hit_chance_array^i }
				update_GNSS_system_stats = yes
				calculate_GNSS_mil_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = GNSS_mil_systems_array
				missile_ui_update = yes
			}
			GNSS_civ_button_click = {
				set_variable = { var_GNSS_civ_system_idx = GNSS_civ_systems_array^i }
				set_variable = { var_GNSS_civ_sat_system_max = global.GNSS_sat_system_max_array^i }
				set_variable = { var_GNSS_civ_production_speed_buildings_factor = GNSS_civ_production_speed_buildings_factor_array^i }
				set_variable = { var_GNSS_civ_production_speed_infrastructure_factor = GNSS_civ_production_speed_infrastructure_factor_array^i }
				set_variable = { var_GNSS_civ_local_resources_factor = GNSS_civ_local_resources_factor_array^i }
				update_GNSS_system_stats = yes
				calculate_GNSS_civ_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = GNSS_civ_systems_array
				missile_ui_update = yes
			}
			COM_mil_button_click = {
				set_variable = { var_COM_mil_system_idx = COM_mil_systems_array^i }
				set_variable = { var_COM_mil_sat_system_max = global.COM_sat_system_max_array^i }
				set_variable = { var_COM_mil_max_command_power = COM_mil_max_command_power_array^i }
				set_variable = { var_COM_mil_army_org_factor = COM_mil_army_org_factor_array^i }
				set_variable = { var_COM_mil_planning_speed = COM_mil_planning_speed_array^i }
				set_variable = { var_COM_mil_air_escort_efficiency = COM_mil_air_escort_efficiency_array^i }
				set_variable = { var_COM_mil_air_intercept_efficiency = COM_mil_air_intercept_efficiency_array^i }
				set_variable = { var_COM_mil_naval_coordination = COM_mil_naval_coordination_array^i }
				update_COM_system_stats = yes
				calculate_COM_mil_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = COM_mil_systems_array
				missile_ui_update = yes
			}
			COM_civ_button_click = {
				set_variable = { var_COM_civ_system_idx = COM_civ_systems_array^i }
				set_variable = { var_COM_civ_sat_system_max = global.COM_sat_system_max_array^i }
				#set_variable = { var_COM_civ_income = COM_civ_income_array^i }
				set_variable = { var_COM_civ_political_power_factor = COM_civ_political_power_factor_array^i }
				set_variable = { var_COM_civ_decryption_factor = COM_civ_decryption_factor_array^i }
				set_variable = { var_COM_civ_encryption_factor = COM_civ_encryption_factor_array^i }
				set_variable = { var_COM_civ_intel_network_gain_factor = COM_civ_intel_network_gain_factor_array^i }
				set_variable = { var_COM_civ_operation_outcome = COM_civ_operation_outcome_array^i }
				update_COM_system_stats = yes
				calculate_COM_civ_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = COM_civ_systems_array
				missile_ui_update = yes
			}
			SPY_mil_button_click = {
				set_variable = { var_SPY_mil_system_idx = SPY_mil_systems_array^i }
				set_variable = { var_SPY_mil_sat_system_max = global.SPY_sat_system_max_array^i }
				set_variable = { var_SPY_mil_max_planning_factor = SPY_mil_max_planning_factor_array^i }
				set_variable = { var_SPY_mil_recon_factor = SPY_mil_recon_factor_array^i }
				set_variable = { var_SPY_mil_air_weather_penalty = SPY_mil_air_weather_penalty_array^i }
				set_variable = { var_SPY_mil_spotting_chance = SPY_mil_spotting_chance_array^i }
				set_variable = { var_SPY_mil_convoy_raiding_efficiency_factor = SPY_mil_convoy_raiding_efficiency_factor_array^i }
				set_variable = { var_SPY_mil_convoy_escort_efficiency = SPY_mil_convoy_escort_efficiency_array^i }
				update_SPY_system_stats = yes
				calculate_SPY_mil_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = SPY_mil_systems_array
				missile_ui_update = yes
			}
			SPY_civ_button_click = {
				set_variable = { var_SPY_civ_system_idx = SPY_civ_systems_array^i }
				set_variable = { var_SPY_civ_sat_system_max = global.SPY_sat_system_max_array^i }
				set_variable = { var_SPY_civ_research_speed_factor = SPY_civ_research_speed_factor_array^i }
				set_variable = { var_SPY_civ_civilian_intel_factor = SPY_civ_civilian_intel_factor_array^i }
				set_variable = { var_SPY_civ_army_intel_factor = SPY_civ_army_intel_factor_array^i }
				set_variable = { var_SPY_civ_navy_intel_factor = SPY_civ_navy_intel_factor_array^i }
				set_variable = { var_SPY_civ_airforce_intel_factor = SPY_civ_airforce_intel_factor_array^i }
				set_variable = { var_SPY_civ_root_out_resistance_effectiveness_factor = SPY_civ_root_out_resistance_effectiveness_factor_array^i }
				update_SPY_system_stats = yes
				calculate_SPY_civ_gui_vars = yes

				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = SPY_civ_systems_array
				missile_ui_update = yes
			}
			close_click = {
				clr_country_flag = open_MD_select_satellite_system_window
				clear_array = GNSS_mil_systems_array
				clear_array = GNSS_civ_systems_array
				clear_array = COM_mil_systems_array
				clear_array = COM_civ_systems_array
				clear_array = SPY_mil_systems_array
				clear_array = SPY_civ_systems_array
				missile_ui_update = yes
			}
		}
		triggers = {
			GNSS_mil_button_click_enabled = {
				OR = {
					check_variable = { GNSS_satellite_array^i > global.GNSS_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
			GNSS_civ_button_click_enabled = {
				OR = {
					check_variable = { GNSS_satellite_array^i > global.GNSS_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
			COM_mil_button_click_enabled = {
				OR = {
					check_variable = { COM_satellite_array^i > global.COM_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
			COM_civ_button_click_enabled = {
				OR = {
					check_variable = { COM_satellite_array^i > global.COM_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
			SPY_mil_button_click_enabled = {
				OR = {
					check_variable = { SPY_satellite_array^i > global.SPY_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
			SPY_civ_button_click_enabled = {
				OR = {
					check_variable = { SPY_satellite_array^i > global.SPY_sat_system_min_array^i }
					check_variable = { i = 0 }
				}
			}
		}

		properties = {
			GNSS_mil_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
			GNSS_civ_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
			COM_mil_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
			COM_civ_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
			SPY_mil_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
			SPY_civ_button = {
				image = "GFX_sat_system_2_frame_btn"
				frame = 2
			}
		}

		dynamic_lists = {
			GNSS_mil_systems_gridbox = {
				array = ROOT.GNSS_mil_systems_array
				entry_container = GNSS_mil_systems_entry
			}
			GNSS_civ_systems_gridbox = {
				array = ROOT.GNSS_civ_systems_array
				entry_container = GNSS_civ_systems_entry
			}
			COM_mil_systems_gridbox = {
				array = ROOT.COM_mil_systems_array
				entry_container = COM_mil_systems_entry
			}
			COM_civ_systems_gridbox = {
				array = ROOT.COM_civ_systems_array
				entry_container = COM_civ_systems_entry
			}
			SPY_mil_systems_gridbox = {
				array = ROOT.SPY_mil_systems_array
				entry_container = SPY_mil_systems_entry
			}
			SPY_civ_systems_gridbox = {
				array = ROOT.SPY_civ_systems_array
				entry_container = SPY_civ_systems_entry
			}
		}
	}

	MD_satellite_orbit_view_gui = {
		window_name = MD_satellite_orbit_view
		context_type = player_context
		parent_window_token = MD_countrymissilesview_space

		dirty = global.missile_ui_updated

		visible = {
			ROOT = {
				check_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
				has_country_flag = open_MD_countrymissilesview
				NOT = { has_country_flag = rods_search_target }
			}
		}
		effects = {
			rotete_globe_1_click = {
				if = {
					limit = {
						has_country_flag = globe_back_view
					}
					clr_country_flag = globe_back_view
				}
				else = {
					set_country_flag = globe_back_view
				}
				missile_ui_update = yes
			}
			sat_1_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_1_array^i }
				}
				missile_ui_update = yes
			}
			sat_1_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_1_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			sat_2_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_2_array^i }
				}
				missile_ui_update = yes
			}
			sat_2_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_2_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			sat_3_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_3_array^i }
				}
				missile_ui_update = yes
			}
			sat_3_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_3_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			sat_4_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_4_array^i }
				}
				missile_ui_update = yes
			}
			sat_4_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_4_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			sat_5_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_5_array^i }
				}
				missile_ui_update = yes
			}
			sat_5_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_5_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			sat_6_button_click = {
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_selected_sat = sat_6_array^i }
				}
				missile_ui_update = yes
			}
			sat_6_button_control_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.sat_target_array = sat_6_array^i }
					add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				}
				missile_ui_update = yes
			}
			add_target_button_click = {
				add_to_array = { ROOT.sat_target_array = var_selected_sat }
				add_to_array = { ROOT.sat_target_TAG_array = orbit_selected_TAG }
				missile_ui_update = yes
			}
			clear_target_array_button_click = {
				clear_array = ROOT.sat_target_array
				clear_array = ROOT.sat_target_TAG_array
				missile_ui_update = yes
			}
			#
			spy_mission_start_button_click = {
				var:orbit_selected_TAG = {
					add_to_array = { ROOT.spy_mission_array = THIS.id }
					add_to_array = { ROOT.spy_mission_sat_num_array = ROOT.var_SPY_mission_num_gui }
					ROOT = {
						add_intel = {
							target = PREV
							civilian_intel = ROOT.var_SPY_mission_intel_add
						}
						add_intel = {
							target = PREV
							army_intel = ROOT.var_SPY_mission_intel_add
						}
						add_intel = {
							target = PREV
							navy_intel = ROOT.var_SPY_mission_intel_add
						}
						add_intel = {
							target = PREV
							airforce_intel = ROOT.var_SPY_mission_intel_add
						}
						PREV = {
							set_country_flag = {
								flag = spy_sat_mission_from_@ROOT
								days = 30
								value = 1
							}
						}
					}
				}
				update_SPY_mission_num = yes
				missile_ui_update = yes
			}
			spy_sat_small_plus_button_bg_click = {
				add_to_variable = { var_SPY_mission_num_gui = 1 }
				update_SPY_mission_plus_minus_button = yes
				missile_ui_update = yes
			}
			spy_sat_small_minus_button_bg_click = {
				subtract_from_variable = { var_SPY_mission_num_gui = 1 }
				update_SPY_mission_plus_minus_button = yes
				missile_ui_update = yes
			}
			spy_mission_button_click = {
				missile_ui_update = yes
			}
			country_view_flag_button_click = {
				set_country_flag = open_MD_satellite_orbit_country_selection
				clear_array = temp_countries
				every_country = {
					ROOT = { add_to_array = { temp_countries = PREV.id } }
				}
				# add_to_array = { ROOT.spy_mission_array = THIS.id }
				# add_to_array = { ROOT.spy_mission_sat_num_array = 199 }
				missile_ui_update = yes
			}
			country_view_flag_button_right_click = {
				set_variable = { orbit_selected_TAG = ROOT.id }
				set_sat_access_arrays_selected_TAG = yes
				set_satellites_gui = yes
				# clear_array = ROOT.sat_target_array
				# clear_array = ROOT.sat_target_TAG_array
				missile_ui_update = yes
			}
			### sat access buttons
			GNSS_mil_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_GNSS_mil_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			GNSS_civ_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_GNSS_civ_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			COM_mil_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_COM_mil_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			COM_civ_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_COM_civ_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			SPY_mil_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_SPY_mil_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			SPY_civ_access_flags_button_click = {
				set_variable = { orbit_selected_TAG = selected_TAG_SPY_civ_access_array^i.id }
				set_sat_access_arrays_selected_TAG = yes
				missile_ui_update = yes
			}
			close_button_click = {
				if = {
					limit = {
						NOT = { has_country_flag = rods_search_target }
					}
					set_country_flag = rods_search_target
				}
				else = {
					clr_country_flag = rods_search_target
				}
				missile_ui_update = yes
			}
		}
		triggers = {
			### sat
			sat_1_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_1_array^i > -1 }
					NOT = { check_variable = { sat_1_array^i < 0 } }
				}
				NOT = { has_country_flag = globe_back_view }
			}
			### sat
			sat_2_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_2_array^i > -1 }
					NOT = { check_variable = { sat_2_array^i < 0 } }
				}
				NOT = { has_country_flag = globe_back_view }
			}
			### sat
			sat_3_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_3_array^i > -1 }
					NOT = { check_variable = { sat_3_array^i < 0 } }
				}
				NOT = { has_country_flag = globe_back_view }
			}
			### sat
			sat_4_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_4_array^i > -1 }
					NOT = { check_variable = { sat_4_array^i < 0 } }
				}
				NOT = { has_country_flag = globe_back_view }
			}
			### sat
			sat_5_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_5_array^i > -1 }
					NOT = { check_variable = { sat_5_array^i < 0 } }
				}
				NOT = { has_country_flag = globe_back_view }
			}

			##################
			### front view ###
			##################
			globe_icon_visible = {
				NOT = { has_country_flag = globe_back_view }
			}
			#################
			### back view ###
			#################
			globe_icon_2_visible = {
				has_country_flag = globe_back_view
			}
			### sat
			sat_6_button_visible = {
				var:orbit_selected_TAG = {
					check_variable = { sat_6_array^i > 0 }
					NOT = { check_variable = { sat_6_array^i < 1 } }
				}
				has_country_flag = globe_back_view
			}
			rotete_globe_1_visible = {
				OR = {
					var:orbit_selected_TAG = {
						check_variable = { sat_6_array^num > 0 }
					}
					has_country_flag = globe_back_view
				}
			}
			####################
			### spy missions ###
			####################
			spy_mission_start_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = spy_mission_start_button_trigger_1_TT
					var:orbit_selected_TAG = {
						NOT = { original_tag = ROOT }
						NOT = { has_country_flag = spy_sat_mission_from_@ROOT }
					}
				}
				check_variable = { ROOT.var_SPY_mission_num_gui > 0 }
				custom_trigger_tooltip = {
					tooltip = spy_mission_start_button_trigger_2_TT
					OR = {
						check_variable = { var_SPY_mission_num_available > ROOT.var_SPY_mission_num_gui }
						check_variable = { var_SPY_mission_num_available = ROOT.var_SPY_mission_num_gui }
					}
				}
			}
			spy_sat_small_plus_button_bg_click_enabled = {
				check_variable = { ROOT.var_SPY_mission_intel_ratio < 1 }
			}
			spy_sat_small_minus_button_bg_click_enabled = {
				check_variable = { ROOT.var_SPY_mission_intel_ratio > 0 }
			}
		}
		dynamic_lists = {
			sat_1_gridbox = {
				array = sat_1_array
				entry_container = sat_1_entry
			}
			sat_2_gridbox = {
				array = sat_2_array
				entry_container = sat_2_entry
			}
			sat_3_gridbox = {
				array = sat_3_array
				entry_container = sat_3_entry
			}
			sat_4_gridbox = {
				array = sat_4_array
				entry_container = sat_4_entry
			}
			sat_5_gridbox = {
				array = sat_5_array
				entry_container = sat_5_entry
			}
			sat_6_gridbox = {
				array = sat_6_array
				entry_container = sat_6_entry
			}
			### sat treaties
			## GNSS
			GNSS_mil_access_gridbox = {
				array = selected_TAG_GNSS_mil_access_array
				entry_container = selected_TAG_GNSS_mil_access_entry
			}
			GNSS_civ_access_gridbox = {
				array = selected_TAG_GNSS_civ_access_array
				entry_container = selected_TAG_GNSS_civ_access_entry
			}
			## COM
			COM_mil_access_gridbox = {
				array = selected_TAG_COM_mil_access_array
				entry_container = selected_TAG_COM_mil_access_entry
			}
			COM_civ_access_gridbox = {
				array = selected_TAG_COM_civ_access_array
				entry_container = selected_TAG_COM_civ_access_entry
			}
			## SPY
			SPY_mil_access_gridbox = {
				array = selected_TAG_SPY_mil_access_array
				entry_container = selected_TAG_SPY_mil_access_entry
			}
			SPY_civ_access_gridbox = {
				array = selected_TAG_SPY_civ_access_array
				entry_container = selected_TAG_SPY_civ_access_entry
			}
			sat_target_gridbox = {
				array = THIS.sat_target_array
				entry_container = sat_target_entry
			}
			spy_mission_gridbox = {
				array = THIS.spy_mission_array
				entry_container = spy_mission_entry
			}
		}

		properties = {
			sat_1_button = {
				image = "[sat_1_type_icon]"
			}
			sat_2_button = {
				image = "[sat_2_type_icon]"
			}
			sat_3_button = {
				image = "[sat_3_type_icon]"
			}
			sat_4_button = {
				image = "[sat_4_type_icon]"
			}
			sat_5_button = {
				image = "[sat_5_type_icon]"
			}
			sat_6_button = {
				image = "[sat_6_type_icon]"
			}
			country_view_flag_button = {
				image = "[?orbit_selected_TAG.GetFlag]"
			}
			### sat treaties
			# GNSS_mil_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.GNSS_mil_treaty_array^i.GetFlag]"
			# }
			GNSS_mil_access_flags_button = {
				image = "[?selected_TAG_GNSS_mil_access_array^i.GetFlag]"
			}
			# GNSS_civ_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.GNSS_civ_treaty_array^i.GetFlag]"
			# }
			GNSS_civ_access_flags_button = {
				image = "[?selected_TAG_GNSS_civ_access_array^i.GetFlag]"
			}
			# COM_mil_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.COM_mil_treaty_array^i.GetFlag]"
			# }
			COM_mil_access_flags_button = {
				image = "[?selected_TAG_COM_mil_access_array^i.GetFlag]"
			}
			# COM_civ_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.COM_civ_treaty_array^i.GetFlag]"
			# }
			COM_civ_access_flags_button = {
				image = "[?selected_TAG_COM_civ_access_array^i.GetFlag]"
			}
			# SPY_mil_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.SPY_mil_treaty_array^i.GetFlag]"
			# }
			SPY_mil_access_flags_button = {
				image = "[?selected_TAG_SPY_mil_access_array^i.GetFlag]"
			}
			# SPY_civ_treaty_flags_button = {
			# 	image = "[?orbit_selected_TAG.SPY_civ_treaty_array^i.GetFlag]"
			# }
			SPY_civ_access_flags_button = {
				image = "[?selected_TAG_SPY_civ_access_array^i.GetFlag]"
			}
		}
	}

	MD_satellite_orbit_country_selection_gui = {
		window_name = MD_satellite_orbit_country_selection
		context_type = player_context
		#context_type = selected_country_context
		parent_window_token = MD_satellite_orbit_view

		dirty = global.missile_ui_updated

		visible = {
			ROOT = {
				check_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
				has_country_flag = open_MD_countrymissilesview
				has_country_flag = open_MD_satellite_orbit_country_selection
			}
		}
		effects = {
			country_list_flag_button_click = {
				set_variable = { orbit_selected_TAG = ROOT.temp_countries^i }
				set_sat_access_arrays_selected_TAG = yes
				var:orbit_selected_TAG = {
					set_variable = { ROOT.var_SPY_mission_num_gui = num_controlled_states }
				}
				update_SPY_mission_start_button = yes
				# clear_array = ROOT.sat_target_array
				# clear_array = ROOT.sat_target_TAG_array
				clr_country_flag = open_MD_satellite_orbit_country_selection
				missile_ui_update = yes
			}
			close_button_click = {
				if = {
					limit = {
						has_country_flag = open_MD_satellite_orbit_country_selection
					}
					clr_country_flag = open_MD_satellite_orbit_country_selection
				}
				clear_array = ROOT.temp_countries
				missile_ui_update = yes
			}
		}

		dynamic_lists = {
			country_list_gridbox = {
				array = temp_countries
				entry_container = country_list_entry
			}
		}
		properties = {
			country_list_flag_button = {
				image = "[?ROOT.temp_countries^i.GetFlag]"
			}
		}
	}
}

# Author(s): Kalkalash, crocomoth
#This is required to research any armoured vehicle hull
sp_armoured_vehicle_project = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	breakthrough_cost = {
		specialization_land = 3
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	resource_cost = {
		resources = {
			steel = 8
			aluminium = 8
			tungsten = 8
		}
	}

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = sp_armoured_vehicle_project_tt
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_armor_bonus_1
		sp_land_generic_reward_armor_bonus_2
		sp_land_generic_reward_armor_bonus_3
		sp_land_generic_reward_engine_bonus_1
		sp_land_generic_reward_engine_bonus_2
		sp_land_generic_reward_engine_bonus_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}
}

sp_tank_support_drones = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = land_Drone_equipment2
		}
	}

	available = {
		FROM = {
			has_tech = land_Drone_equipment3
		}
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.medium

	project_output = {
		enable_equipment_modules = {
			tank_drones
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_support_drones_reward_improved_visibility = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_support_drones_reward_improved_visibility

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							defense = 0.03
							breakthrough = 0.03
						}
						light_tank_hull = {
							defense = 0.03
							breakthrough = 0.03
						}
					}
				}
			}
		}
	}

}

sp_tank_support_drones_2 = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	special_project_parent = {
		sp_tank_support_drones
	}

	visible = {
		FROM = {
			has_tech = land_Drone_equipment3
		}
	}

	available = {
		FROM = {
			has_tech = land_Drone_equipment4
		}
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.medium

	project_output = {
		enable_equipment_modules = {
			tank_drones_2
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_support_drones_reward_improved_targeting = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_support_drones_reward_improved_targeting

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							soft_attack = 0.03
							hard_attack = 0.03
						}
						light_tank_hull = {
							soft_attack = 0.03
							hard_attack = 0.03
						}
					}
				}
			}
		}
	}
}

sp_active_protection_systems = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = tank_components_tech_2
		}
	}

	available = {
		FROM = {
			has_tech = tank_components_tech_3
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.medium

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_TECH
				TECH = tank_components_tech_4
			}
			mark_technology_tree_layout_dirty = yes
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_active_protection_systems_reward_improved_targeting = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_active_protection_systems_reward_improved_targeting

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.03
						}
						spaa_hull = {
							air_attack = 0.03
						}
					}
				}
			}
		}
	}

}

sp_tank_electric_engine = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = electric_engine_tech_1
		}
	}

	available = {
		FROM = {
			has_tech = electric_engine_tech_2
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.medium

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_TECH
				TECH = electric_engine_tech_3
			}
			mark_technology_tree_layout_dirty = yes
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_engine_bonus_1
		sp_land_generic_reward_engine_bonus_2
		sp_land_generic_reward_engine_bonus_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_electric_engine_hybrid_mode = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_electric_engine_hybrid_mode

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							maximum_speed = 0.05
						}
						light_tank_hull = {
							maximum_speed = 0.05
						}
					}
				}
			}
		}
	}
}

sp_tank_super_heavy_cannon = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = large_gun_tech
		}
	}

	available = {
		FROM = {
			has_tech = large_gun_tech
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.medium

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_TECH
				TECH = very_large_gun_tech
			}
			mark_technology_tree_layout_dirty = yes
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_super_heavy_cannon_propellant = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_super_heavy_cannon_propellant

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							soft_attack= 0.02
							hard_attack = 0.02
						}
						light_tank_hull = {
							soft_attack= 0.02
							hard_attack = 0.02
						}
					}
				}
			}
		}
	}
}

sp_tank_aa_launchers = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = nsb_Anti_Air_0
		}
	}

	available = {
		FROM = {
			has_tech = nsb_Anti_Air_2
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		enable_equipment_modules = {
			aa_launchers
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_artillery_bonus_2
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_aa_launchers_reward_multi_launcher_missile = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_aa_launchers_reward_utlise_in_tanks

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							air_attack = 0.03
						}
					}
				}
			}
			option = {
				token = sp_tank_aa_launchers_reward_utilise_in_manpads

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.03
						}
					}
				}
			}
		}
	}
}

sp_tank_self_sharpening_ammo = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = medium_gun_tech_2
		}
	}

	available = {
		FROM = {
			has_tech = medium_gun_tech_3
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		equipment_bonus = {
			mbt_hull = {
				hard_attack = 0.03
				ap_attack = 0.05
			}
			light_tank_hull = {
				hard_attack = 0.03
				ap_attack = 0.05
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_self_sharpening_ammo_reward_improved_alloys = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_self_sharpening_ammo_reward_improved_alloys

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							armor_value = 0.03
						}
						light_tank_hull = {
							armor_value = 0.03
						}
					}
				}
			}
		}
	}
}

sp_tank_thermal_camo = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = mbt_tech_2
		}
	}

	available = {
		FROM = {
			has_tech = mbt_tech_3
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		equipment_bonus = {
			mbt_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			light_tank_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			apc_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			ifv_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}
}

sp_tank_chameleon_camo = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	visible = {
		FROM = {
			has_tech = mbt_tech_3
		}
	}

	available = {
		FROM = {
			has_tech = mbt_tech_4
		}
	}

	special_project_parent = {
		sp_tank_thermal_camo
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		equipment_bonus = {
			mbt_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			light_tank_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			apc_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
			ifv_hull = {
				defense = 0.03
				breakthrough = 0.03
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}

sp_super_heavy_tank_turrets = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	prototype_time = sp_time.prototype.long

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	visible = {
		FROM = {
			has_tech = large_gun_tech
		}
	}
	available = {
		FROM = {
			has_tech = large_gun_tech
		}
	}

	project_output = {
		enable_equipment_modules = {
			tank_heavy_tank_turrets
		}
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_double_barrel_cannons
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_railgun_cannon
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_tank_based_laser_main_cannons
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_super_heavy_tank_turrets_reward_turret_ring = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_super_heavy_tank_turrets_reward_turret_ring_speed

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							breakthrough = 0.03
						}
					}
				}
			}
			option = {
				token = sp_super_heavy_tank_turrets_reward_turret_ring_armour

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							armor_value = 0.03
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_double_barrel_cannons = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_super_heavy_tank_turrets
	}

	visible = {
		FROM = {
			is_special_project_completed = sp:sp_super_heavy_tank_turrets
		}
	}

	project_output = {
		enable_equipment_modules = {
			tank_double_barrel_tank_cannons
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_double_barrel_cannons_reward_improved_autoloader = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_double_barrel_cannons_reward_improved_autoloader

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							hard_attack = 0.03
						}
						light_tank_hull = {
							hard_attack = 0.03
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_railgun_cannon = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	special_project_parent = {
		sp_super_heavy_tank_turrets
	}

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = medium_gun_tech_2
		}
	}

	available = {
		FROM = {
			has_tech = medium_gun_tech_3
		}
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		enable_equipment_modules = {
			tank_railgun_cannon_1
		}
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_railgun_cannon_2
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_railgun_cannon_reward_improved_barrel = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_railgun_cannon_reward_improved_barrel

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							reliability = 0.03
						}
						light_tank_hull = {
							reliability = 0.03
						}
					}
				}
			}
		}
	}
}

sp_railgun_cannon_2 = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			is_special_project_completed = sp:sp_railgun_cannon
		}
	}

	special_project_parent = {
		sp_railgun_cannon
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.insane

	project_output = {
		enable_equipment_modules = {
			tank_railgun_cannon_2
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_railgun_cannon_2_reward_improved_barrel = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_railgun_cannon_2_reward_improved_barrel

				iteration_output = {
					equipment_bonus = {
						mbt_hull = {
							reliability = 0.03
						}
						light_tank_hull = {
							reliability = 0.03
						}
					}
				}
			}
		}
	}
}

sp_tank_based_laser_main_cannons = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	visible = {
		FROM = {
			is_special_project_completed = sp:sp_super_heavy_tank_turrets
		}
	}

	breakthrough_cost = {
		specialization_land = 2
	}

	special_project_parent = {
		sp_super_heavy_tank_turrets
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.insane

	project_output = {
		enable_equipment_modules = {
			tank_focused_laser_beam_cannon
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_based_laser_main_cannons_reward_air_defence = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_based_laser_main_cannons_reward_air_defence

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.03
						}
						spaa_hull = {
							air_attack = 0.03
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_tank_based_laser_point_defense = {
	allowed = { has_dlc = "No Step Back" }
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	visible = {
		FROM = {
			has_tech = tank_components_tech_3
		}
	}

	available = {
		FROM = {
			has_tech = tank_components_tech_4
		}
	}

	project_output = {
		enable_equipment_modules = {
			tank_laser_point_defense
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_tank_based_laser_point_defense_reward_air_defence = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_tank_based_laser_point_defense_reward_air_defence

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.03
						}
						spaa_hull = {
							air_attack = 0.03
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}
# Author(s): AngriestBird, Doolittle, DROID
#This is required to research any aircraft hull
sp_aircraft_project = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_aircraft_experimentation
	project_tags = sp_tag_avionics_aeronautics

	ai_will_do = {
		base = 1
	}

	breakthrough_cost = {
		specialization_air = 3
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	resource_cost = {
		resources = {
			aluminium = 10
			tungsten = 10
		}
	}

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = sp_aircraft_project_tt
			}
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}
}

sp_experimental_engines = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_experimental_engine_types
	project_tags = sp_tag_aircraft_engines

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	visible = {
		FROM = {
			has_tech = early_airframe_designs
		}
	}
	available = {
		FROM = {
			has_tech = engines_2
		}
	}

	breakthrough_cost = {
		specialization_air = 1
	}

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_nuclear_engines
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_solar_engines
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_scramjet_engines
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_ramjet_engines
			}
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 5
		modifier = {
			add = 20
			FROM = {
				OR = {
					original_tag = USA
					original_tag = SOV
					original_tag = CHI
					original_tag = FRA
					original_tag = ENG
				}
			}
		}
	}
}

sp_nuclear_engines = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_airplane_nuclear_engines
	project_tags = sp_tag_aircraft_engines

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_experimental_engines
	}

	visible = {
		FROM = {
			OR = {
				has_tech = nuclear_technology
				has_tech = tech_nuclear_power_systems
				has_tech = engines_2
			}
		}
	}

	available = {
		FROM = {
			has_tech = reactor1
			has_tech = engines_2
			has_tech = tech_nuclear_power_systems
		}
	}

	project_output = {
		country_effects = {
			mark_technology_tree_layout_dirty = yes
			custom_effect_tooltip = sp_nuclear_engines_TT
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}

sp_solar_engines = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air

	project_tags = sp_tag_aircraft_engines

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_experimental_engines
	}

	available = {
		FROM = {
			has_tech = early_renewables
		}
	}

	project_output = {
		country_effects = {
			mark_technology_tree_layout_dirty = yes
			custom_effect_tooltip = sp_solar_engines_TT
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_scramjet_engines = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air

	project_tags = sp_tag_aircraft_engines

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_experimental_engines
	}

	available = {
		FROM = {
			has_tech = engines_4
			is_special_project_completed = sp:sp_experimental_engines
		}
	}

	visible = {
		FROM = {
			OR = {
				has_tech = engines_4
				is_special_project_completed = sp:sp_experimental_engines
			}
		}
	}

	project_output = {
		enable_equipment_modules = {
			engine_scramjet
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_ramjet_engines = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air

	project_tags = sp_tag_aircraft_engines

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_experimental_engines
	}

	visible = {
		FROM = {
			OR = {
				has_tech = engines_4
				is_special_project_completed = sp:sp_experimental_engines
			}
		}
	}
	available = {
		FROM = {
			has_tech = engines_4
			is_special_project_completed = sp:sp_experimental_engines
		}
	}

	project_output = {
		enable_equipment_modules = {
			engine_ramjet
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}

sp_fully_autonomous_computers_framework = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_fully_autonomous_computer_frameworks
	project_tags = sp_tag_pilotless_vehicles

	prototype_time = sp_time.prototype.medium

	complexity = sp_complexity.large

	breakthrough_cost = {
		specialization_air = 1
	}

	visible = {
		FROM = {
			OR = {
				has_tech = fully_automated_drones
				has_tech = machine_learning
			}
		}
	}
	available = {
		FROM = {
			has_tech = fully_automated_drones
			has_tech = machine_learning
		}
	}

	project_output = {
		country_effects = {
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_fully_autonomous_fighters
			}
			custom_effect_tooltip = {
				localization_key = SP_UNLOCK_PROJECT
				PROJECT = sp_fully_autonomous_bombers
			}
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_air_autonomous_computers_reward_improved_detection = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_air_autonomous_computers_reward_improved_detection

				iteration_output = {
					equipment_bonus = {
						AS_Fighter_equipment = {
							air_ground_attack = 0.03
							air_agility = 0.05
							reliability = 0.05
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}

sp_fully_autonomous_fighters = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_autonomous_fighters
	project_tags = sp_tag_pilotless_vehicles

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	breakthrough_cost = {
		specialization_air = 1
	}

	special_project_parent = {
		sp_fully_autonomous_computers_framework
	}

	visible = {
		FROM = {
			OR = {
				has_tech = fully_automated_drones
				has_tech = machine_learning
			}
		}
	}
	available = {
		FROM = {
			has_tech = fully_automated_drones
			has_tech = machine_learning
			is_special_project_completed = sp:sp_fully_autonomous_computers_framework
		}
	}

	project_output = {
		enable_equipment_modules = {
			fully_autonomous_computer_system_light
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}

sp_fully_autonomous_bombers = {
	allowed = { has_dlc = "By Blood Alone" }
	specialization = specialization_air
	icon = GFX_sp_autonomous_bombers
	project_tags = sp_tag_pilotless_vehicles

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	breakthrough_cost = {
		specialization_air = 1
	}

	special_project_parent = {
		sp_fully_autonomous_computers_framework
	}

	visible = {
		FROM = {
			OR = {
				has_tech = fully_automated_drones
				has_tech = machine_learning
				has_tech = tgp_recon_2
			}
		}
	}
	available = {
		FROM = {
			has_tech = fully_automated_drones
			has_tech = tgp_recon_2
			has_tech = machine_learning
			is_special_project_completed = sp:sp_fully_autonomous_computers_framework
		}
	}

	project_output = {
		enable_equipment_modules = {
			fully_autonomous_computer_system_heavy
		}
	}

	generic_prototype_rewards = {
		sp_air_generic_reward_scientist_xp_1
		sp_air_generic_reward_scientist_xp_2
		sp_air_generic_reward_scientist_xp_3
		sp_air_generic_reward_army_xp_1
		sp_air_generic_reward_army_xp_2
		sp_air_generic_reward_army_xp_3
		sp_air_generic_reward_major_progress_1
		sp_air_generic_reward_major_progress_2
		sp_air_generic_reward_major_progress_3
		sp_air_generic_reward_test_failure_1
		sp_air_generic_reward_test_failure_2
		sp_air_generic_reward_test_failure_3
		sp_air_generic_reward_resource_scarcity
		sp_air_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_air_autonomous_bombers_reward_improved_detection = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_air_autonomous_bombers_reward_improved_detection

				iteration_output = {
					equipment_bonus = {
						large_plane_airframe = {
							reliability = 0.10
							air_agility = 0.05
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}